<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„ÙƒØ¨ÙŠØ±Ø©</title>
    <style>
        body { background: #1b5e20; font-family: 'Segoe UI', sans-serif; margin: 0; color: white; text-align: center; }
        .top-bar { background: #2e7d32; padding: 15px; display: flex; justify-content: space-around; border-bottom: 5px solid #ffd700; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .stat-box { background: rgba(0,0,0,0.6); padding: 10px 25px; border-radius: 30px; border: 2px solid #ffd700; font-weight: bold; font-size: 20px; }
        
        .game-world { display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 20px; }
        
        /* Ø³Ø§Ø­Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        .animal-zone { 
            width: 90%; max-width: 800px; height: 400px; 
            background-image: url('https://img.freepik.com/free-vector/pixel-art-grass-background_52683-113066.jpg'); 
            background-size: cover; border: 10px solid #5d4037; border-radius: 40px; 
            position: relative; overflow: hidden; box-shadow: inset 0 0 50px rgba(0,0,0,0.5);
        }
        
        .animal-img { 
            position: absolute; 
            width: 100px; height: 100px; /* ØªÙ… ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø­Ø¬Ù… Ù‡Ù†Ø§ */
            transition: all 4s ease-in-out; 
            filter: drop-shadow(5px 10px 5px rgba(0,0,0,0.4)); 
            cursor: pointer;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
        .farm-grid { 
            display: grid; grid-template-columns: repeat(4, 85px); gap: 12px; 
            background: #3e2723; border: 10px solid #2d1b10; border-radius: 25px; padding: 20px; 
        }
        .plot { 
            width: 85px; height: 85px; background: #5d4037; border: 3px solid #3d1c02; 
            border-radius: 12px; position: relative; cursor: pointer; display: flex; 
            align-items: center; justify-content: center; font-size: 40px; 
        }
        .timer { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.8); color: #00ff00; font-size: 12px; border-radius: 0 0 10px 10px; font-weight: bold; }

        .shop-panel { 
            background: #fff; color: #333; width: 90%; max-width: 800px; 
            margin: 20px auto; border-radius: 30px; padding: 25px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 20px; 
        }
        .shop-item { border: 3px solid #f0f0f0; border-radius: 20px; padding: 15px; transition: 0.3s; }
        .shop-item:hover { transform: translateY(-5px); border-color: #ffd700; }
        .btn-buy { background: #e67e22; color: white; border: none; padding: 12px; border-radius: 12px; cursor: pointer; font-weight: bold; width: 100%; font-size: 16px; margin-top: 10px; }
        
        #login-screen { position: fixed; inset: 0; background: #1b5e20; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen">
    <div style="background:white; color:black; padding:50px; border-radius:40px; text-align:center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
        <h1 style="color:#2e7d32;">ğŸšœ Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± V12</h1>
        <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</p>
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." style="padding:15px; width:250px; border-radius:15px; border:2px solid #2e7d32; font-size:18px;"><br><br>
        <button onclick="login()" style="padding:15px 70px; background:#ffd700; color:#333; border:none; border-radius:20px; font-weight:bold; font-size:22px; cursor:pointer;">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div id="game-ui" class="hidden">
    <div class="top-bar">
        <div class="stat-box">ğŸ’° <span id="gold-val">0</span></div>
        <div class="stat-box">â­ Ù…Ø³ØªÙˆÙ‰: <span id="lvl-val">1</span></div>
        <div class="stat-box">ğŸ¯ Ø¹Ø³Ù„: <span id="honey-val">0</span></div>
    </div>

    <div class="game-world">
        <div class="animal-zone" id="animal-zone">
            <div style="background:rgba(0,0,0,0.5); color:white; padding:10px; position:absolute; top:0; left:0; right:0; font-size:14px; font-weight:bold;">Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙˆØ§Ø´ÙŠ ÙˆØ§Ù„Ø·ÙŠÙˆØ± (ØµÙˆØ± ÙƒØ¨ÙŠØ±Ø©)</div>
        </div>

        <div class="farm-grid" id="grid"></div>
    </div>

    <button onclick="sellAll()" style="background:#2ecc71; color:white; padding:20px 80px; border:none; border-radius:60px; font-size:24px; font-weight:bold; cursor:pointer; margin:20px; box-shadow: 0 8px #27ae60;">ğŸ’° Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ ÙˆØ§Ù„Ø¹Ø³Ù„ ğŸ’°</button>

    <div class="shop-panel">
        <div class="shop-item">
            <img src="https://cdn-icons-png.flaticon.com/512/1864/1864470.png" width="80"><br>
            <b>Ø¯Ø¬Ø§Ø¬Ø© Ø¨ÙŠØ§Ø¶Ø©</b><br>100 ğŸ’° <button class="btn-buy" onclick="buy('chicken', 100)">Ø´Ø±Ø§Ø¡</button>
        </div>
        <div class="shop-item">
            <img src="https://cdn-icons-png.flaticon.com/512/1998/1998610.png" width="80"><br>
            <b>Ø¨Ù‚Ø±Ø© Ø­Ù„ÙˆØ¨</b><br>500 ğŸ’° <button class="btn-buy" onclick="buy('cow', 500)">Ø´Ø±Ø§Ø¡</button>
        </div>
        <div class="shop-item">
            <img src="https://cdn-icons-png.flaticon.com/512/2153/2153282.png" width="80"><br>
            <b>Ø®Ù„ÙŠØ© Ù†Ø­Ù„</b><br>1200 ğŸ’° <button class="btn-buy" onclick="buy('bee', 1200)">Ø´Ø±Ø§Ø¡</button>
        </div>
    </div>
</div>

<script>
    let farm = { user: "", gold: 3000, lvl: 1, inv: 0, honey: 0, animals: [] };
    const IMAGES = {
        chicken: 'https://media.tenor.com/7vY6LToG-eIAAAAj/chicken-walking.gif', // Ø¯Ø¬Ø§Ø¬Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ØªÙ…Ø´ÙŠ
        cow: 'https://media.tenor.com/p_v0C-m7HwIAAAAj/cow.gif', // Ø¨Ù‚Ø±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©
        bee: 'https://cdn-icons-png.flaticon.com/512/2153/2153282.png'
    };

    function login() {
        let u = document.getElementById('username').value.trim();
        if(!u) return;
        let saved = localStorage.getItem('ultra_farm_v12_' + u);
        if(saved) farm = JSON.parse(saved); else farm.user = u;
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');
        initGrid();
        farm.animals.forEach(type => renderAnimal(type));
        updateUI();
        setInterval(moveAnimals, 4000);
        setInterval(() => {
            let hives = farm.animals.filter(a => a === 'bee').length;
            if(hives > 0) { farm.honey += hives; updateUI(); }
        }, 10000);
    }

    function initGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = "";
        for(let i=0; i<16; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            grid.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerText === "") {
            p.innerText = "ğŸŒ±";
            let timeLeft = 180;
            let timer = document.createElement('div');
            timer.className = 'timer';
            p.appendChild(timer);
            let count = setInterval(() => {
                timeLeft--;
                timer.innerText = Math.floor(timeLeft/60) + ":" + (timeLeft%60).toString().padStart(2,'0');
                if(timeLeft <= 0) {
                    clearInterval(count);
                    let crops = ["ğŸŒ¾", "ğŸŒ¿", "ğŸ…", "ğŸ“"];
                    p.innerText = crops[Math.floor(Math.random()*crops.length)];
                    p.onclick = () => { farm.inv++; p.innerText = ""; p.onclick = () => plant(p); updateUI(); };
                }
            }, 1000);
        }
    }

    function buy(type, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            farm.animals.push(type);
            if(type !== 'bee') renderAnimal(type);
            updateUI();
        } else { alert("Ø§Ù„Ø°Ù‡Ø¨ ØºÙŠØ± ÙƒØ§ÙÙ!"); }
    }

    function renderAnimal(type) {
        if(type === 'bee') return;
        let img = document.createElement('img');
        img.src = IMAGES[type];
        img.className = 'animal-img';
        img.style.left = Math.random() * 80 + "%";
        img.style.top = Math.random() * 80 + "%";
        document.getElementById('animal-zone').appendChild(img);
    }

    function moveAnimals() {
        let animals = document.getElementsByClassName('animal-img');
        for(let a of animals) {
            a.style.left = Math.random() * 85 + "%";
            a.style.top = Math.random() * 80 + "%";
        }
    }

    function sellAll() {
        let profit = (farm.inv * 300) + (farm.honey * 600);
        if(profit > 0) {
            farm.gold += profit; farm.inv = 0; farm.honey = 0;
            updateUI();
            alert("ØªÙ… Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø­ØµÙˆÙ„! Ø±Ø¨Ø­Øª " + profit + " ğŸ’°");
        }
    }

    function updateUI() {
        document.getElementById('gold-val').innerText = farm.gold;
        document.getElementById('lvl-val').innerText = Math.floor(farm.gold / 5000) + 1;
        document.getElementById('honey-val').innerText = farm.honey;
        localStorage.setItem('ultra_farm_v12_' + farm.user, JSON.stringify(farm));
    }
</script>
</body>
</html>
