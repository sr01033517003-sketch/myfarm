<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© V15</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap');
        body { background: #4CAF50; font-family: 'Cairo', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ Ù„Ø·Ù„Ø¨Ùƒ */
        .top-bar { background: #8BC34A; padding: 15px; display: flex; justify-content: space-around; border-bottom: 5px solid #689F38; }
        .stat { background: #f1f8e9; padding: 5px 20px; border-radius: 20px; border: 2px solid #7CB342; font-weight: bold; display: flex; align-items: center; gap: 10px; }

        .game-body { display: flex; flex: 1; position: relative; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡ */
        .side-menu { width: 220px; background: #B2DFDB; padding: 15px; border-left: 4px solid #80CBC4; display: flex; flex-direction: column; gap: 10px; z-index: 10; }
        .player-card { background: #ffffff; padding: 10px; border-radius: 12px; font-size: 14px; text-align: center; border-right: 5px solid #4db6ac; }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm-world { flex: 1; position: relative; background: #4CAF50; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; }

        /* Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚) */
        .grid { display: grid; grid-template-columns: repeat(4, 85px); gap: 12px; background: #5d4037; padding: 20px; border-radius: 25px; border: 8px solid #3e2723; }
        .plot { width: 85px; height: 85px; background: #6d4c41; border: 2px solid #3d1c02; border-radius: 12px; cursor: pointer; position: relative; display: flex; align-items: center; justify-content: center; font-size: 40px; }
        .timer { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.7); color: #00ff00; font-size: 12px; text-align: center; border-radius: 0 0 10px 10px; }

        /* Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© (ØµÙˆØ±ØªÙƒ) */
        .chicken { position: absolute; width: 110px; transition: all 4s ease-in-out; cursor: pointer; z-index: 5; filter: drop-shadow(5px 5px 5px rgba(0,0,0,0.3)); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .btn-collect { position: absolute; bottom: 30px; left: 30px; background: #2196F3; color: white; padding: 15px 45px; border-radius: 50px; font-size: 22px; font-weight: bold; border: none; cursor: pointer; box-shadow: 0 6px #1976D2; }
        .btn-collect:active { transform: translateY(3px); box-shadow: 0 2px #1976D2; }
        
        .btn-buy { background: #4CAF50; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; font-family: 'Cairo'; }

        #login { position: fixed; inset: 0; background: #2E7D32; display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .login-card { background: white; padding: 40px; border-radius: 30px; text-align: center; width: 300px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login">
    <div class="login-card">
        <h2 style="color:#2E7D32">ğŸšœ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</h2>
        <input type="text" id="user" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:12px; width:80%; border-radius:10px; border:1px solid #ccc; font-family:'Cairo';"><br><br>
        <button onclick="start()" class="btn-buy" style="background:#FF9800; font-size:18px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div id="game" class="hidden" style="display:contents;">
    <div class="top-bar">
        <div class="stat">ğŸ’° Ø°Ù‡Ø¨: <span id="gold">0</span></div>
        <div class="stat">ğŸ¥š Ø¨ÙŠØ¶: <span id="eggs">0</span></div>
        <div class="stat">â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="lvl">1</span></div>
    </div>

    <div class="game-body">
        <div class="side-menu">
            <h3 style="text-align:center; color:#004D40;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h3>
            <div class="player-card">Ø§Ø´Ù„ÙŠ (Ù…ØªØµÙ„)</div>
            <div class="player-card">Ø§Ù‡ÙˆØ§Ø² (Ù…ØªØµÙ„)</div>
            <div class="player-card">Ø£Ø¹Ø§Ù† (Ù…ØªØµÙ„)</div>
            <button class="btn-buy" onclick="buyChicken()">Ø´Ø±Ø§Ø¡ Ø¯Ø¬Ø§Ø¬Ø© (200ğŸ’°)</button>
        </div>

        <div class="farm-world" id="world">
            <h3 style="color:white; text-shadow: 2px 2px #000;">ğŸŒ¾ Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ù„Ù†Ù…Ùˆ)</h3>
            <div class="grid" id="grid"></div>
            
            <button class="btn-collect" onclick="collectAll()">Ø¥ÙŠØ¹Ø§Ù† (Ø¬Ù…Ø¹ ÙˆØ¨ÙŠØ¹)</button>
        </div>
    </div>
</div>

<script>
    let farm = { gold: 1000, eggs: 0, crops: 0, chickens: 0 };
    // Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ø§Ù„ØªÙŠ Ø£Ø±Ø³Ù„ØªÙ‡Ø§
    const CHICKEN_IMG = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function start() {
        let n = document.getElementById('user').value;
        if(!n) return;
        document.getElementById('login').classList.add('hidden');
        document.getElementById('game').classList.remove('hidden');
        initGrid();
        setInterval(moveChickens, 4000);
        setInterval(() => { if(farm.chickens > 0) farm.eggs += farm.chickens; updateUI(); }, 10000);
    }

    function initGrid() {
        const g = document.getElementById('grid');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            g.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerHTML === "") {
            p.innerHTML = "ğŸŒ±";
            let time = 180;
            let t = document.createElement('div');
            t.className = 'timer';
            p.appendChild(t);

            let count = setInterval(() => {
                time--;
                let m = Math.floor(time/60), s = time%60;
                t.innerText = `${m}:${s<10?'0'+s:s}`;
                if(time <= 0) {
                    clearInterval(count);
                    p.innerHTML = "ğŸŒ¾";
                    p.onclick = () => { farm.crops++; p.innerHTML = ""; p.onclick = () => plant(p); updateUI(); };
                }
            }, 1000);
        }
    }

    function buyChicken() {
        if(farm.gold >= 200) {
            farm.gold -= 200;
            farm.chickens++;
            let img = document.createElement('img');
            img.src = CHICKEN_IMG;
            img.className = 'chicken';
            img.style.left = "50%"; img.style.top = "50%";
            document.getElementById('world').appendChild(img);
            updateUI();
        } else alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!");
    }

    function moveChickens() {
        let imgs = document.getElementsByClassName('chicken');
        for(let i of imgs) {
            i.style.left = Math.random() * 80 + "%";
            i.style.top = Math.random() * 60 + 20 + "%";
        }
    }

    function collectAll() {
        let total = (farm.eggs * 20) + (farm.crops * 50);
        if(total > 0) {
            farm.gold += total;
            farm.eggs = 0; farm.crops = 0;
            updateUI();
            alert("ØªÙ… Ø¨ÙŠØ¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙˆØ±Ø¨Ø­Øª " + total + " ğŸ’°");
        }
    }

    function updateUI() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('eggs').innerText = farm.eggs;
        document.getElementById('lvl').innerText = Math.floor(farm.gold / 2000) + 1;
    }
</script>
</body>
</html>
