<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø²Ø±Ø¹ØªÙŠ - Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
    body{ margin:0; font-family: 'Cairo', sans-serif; background:#3e2723; color:white; text-align:center; padding-bottom: 200px;}

    .top{ background:#1b5e20; padding:15px; font-size:14px; display:flex; justify-content:space-around; align-items:center; border-bottom: 3px solid #ffd700; position: sticky; top: 0; z-index: 100;}
    .stat-item { background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 10px; border: 1px solid #ffd700; }

    .farm-section { background:#4caf50; padding:15px; border-radius:15px; margin: 10px auto; width:max-content; border: 4px solid #2e7d32; }
    .farm{ display:grid; grid-template-columns:repeat(3,90px); gap:8px; }
    
    .plot{ width:90px; height:90px; background:#795548; border-radius:12px; font-size:32px; display:flex; align-items:center; justify-content:center; cursor:pointer; border: 2px solid #5d4037; }
    .plot.selected { border: 3px solid white; box-shadow: 0 0 10px white; }

    /* Ù‚Ø³Ù… Ø§Ù„Ù…ØµÙ†Ø¹ */
    .factory-section { background: #5d4037; margin: 15px auto; padding: 15px; border-radius: 20px; width: 90%; border: 3px solid #d7ccc8; }
    .factory-grid { display: flex; justify-content: space-around; gap: 10px; }
    .machine { background: #3e2723; padding: 10px; border-radius: 15px; flex: 1; border: 2px solid #ffd700; }
    
    .inventory-bar { background: #efebe9; color: #333; padding: 8px; margin: 10px auto; width: 90%; border-radius: 10px; font-size: 12px; display: flex; justify-content: space-around; font-weight: bold;}

    .controls { background: rgba(0,0,0,0.9); padding: 15px; position: fixed; bottom: 0; width: 100%; display: flex; flex-direction: column; align-items: center; gap: 10px; z-index: 200; border-top: 3px solid #ffd700; }
    .btn-row { display: flex; gap: 5px; flex-wrap: wrap; justify-content: center; }
    
    .btn { padding: 10px 14px; border: none; border-radius: 10px; cursor: pointer; font-family: Cairo; font-weight: bold; color: white; font-size: 12px; transition: 0.2s; }
    .btn-factory { background: #f57c00; width: 100%; margin-top: 5px; }
    .btn-sell { background: #00bcd4; width: 90%; }
</style>
</head>
<body>

<div class="top">
    <div class="stat-item">ğŸ’° <span id="money">0</span></div>
    <div class="stat-item">ğŸ¥– Ø®Ø¨Ø²: <span id="bread-count">0</span></div>
    <div class="stat-item">ğŸ¥« ØµÙ„ØµØ©: <span id="sauce-count">0</span></div>
</div>

<div class="inventory-bar">
    <span>ğŸŒ¾ Ø§Ù„Ù‚Ù…Ø­: <span id="wheat-inv">0</span></span>
    <span>ğŸ… Ø§Ù„Ø·Ù…Ø§Ø·Ù…: <span id="tomato-inv">0</span></span>
</div>

<div class="farm-section">
    <div class="farm" id="farm"></div>
</div>

<div class="factory-section">
    <h3 style="font-size: 16px; margin-bottom: 10px;">ğŸ­ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ØµØ§Ù†Ø¹</h3>
    <div class="factory-grid">
        <div class="machine">
            ğŸ¥– Ø§Ù„Ù…Ø®Ø¨Ø²<br>
            <button class="btn btn-factory" onclick="craft('bread')">Ø§ØµÙ†Ø¹ (3 Ù‚Ù…Ø­)</button>
        </div>
        <div class="machine">
            ğŸ¥« Ø§Ù„Ù…Ø¹ØµØ±Ø©<br>
            <button class="btn btn-factory" onclick="craft('sauce')">Ø§ØµÙ†Ø¹ (2 Ø·Ù…Ø§Ø·Ù…)</button>
        </div>
    </div>
</div>

<div class="controls">
    <div class="btn-row">
        <button class="btn" style="background:#43a047" onclick="plant('wheat')">ğŸŒ¾ Ø²Ø±Ø¹ Ù‚Ù…Ø­</button>
        <button class="btn" style="background:#e53935" onclick="plant('tomato')">ğŸ… Ø²Ø±Ø¹ Ø·Ù…Ø§Ø·Ù…</button>
        <button class="btn" style="background:#fb8c00" onclick="harvest()">ğŸ§º Ø­ØµØ§Ø¯</button>
        <button class="btn" style="background:#6d4c41" onclick="buyLand()">ğŸ›’ ØªÙˆØ³ÙŠØ¹ (50)</button>
    </div>
    <button onclick="sellProducts()" class="btn btn-sell">ğŸ’° Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© (Ø£Ø±Ø¨Ø§Ø­ Ø®ÙŠØ§Ù„ÙŠØ©)</button>
</div>

<script>
let data = JSON.parse(localStorage.getItem("farmDataV9")) || {
    money: 100,
    land: 6,
    plots: Array(6).fill({type: "", stage: ""}),
    inv: { wheat: 0, tomato: 0 },
    prods: { bread: 0, sauce: 0 }
};

let selected = null;

function save() { localStorage.setItem("farmDataV9", JSON.stringify(data)); }

function draw() {
    document.getElementById("money").innerText = Math.floor(data.money);
    document.getElementById("wheat-inv").innerText = data.inv.wheat;
    document.getElementById("tomato-inv").innerText = data.inv.tomato;
    document.getElementById("bread-count").innerText = data.prods.bread;
    document.getElementById("sauce-count").innerText = data.prods.sauce;

    const farmDiv = document.getElementById("farm");
    farmDiv.innerHTML = "";
    farmDiv.style.gridTemplateColumns = `repeat(${data.land > 9 ? 4 : 3}, 90px)`;

    for(let i=0; i<data.land; i++){
        let d = document.createElement("div");
        let p = data.plots[i];
        d.className = "plot" + (selected === i ? " selected" : "");
        
        if(p.stage === "growing") d.innerText = "ğŸŒ±";
        else if(p.stage === "ready") d.innerText = p.type === "wheat" ? "ğŸŒ¾" : "ğŸ…";

        d.onclick = () => { selected = i; draw(); };
        farmDiv.appendChild(d);
    }
    save();
}

function plant(type) {
    if(selected === null || data.plots[selected].stage !== "") return;
    let cost = type === "wheat" ? 5 : 15;
    if(data.money >= cost) {
        data.money -= cost;
        data.plots[selected] = { type: type, stage: "growing" };
        draw();
        let p = selected;
        setTimeout(() => {
            if(data.plots[p].stage === "growing") {
                data.plots[p].stage = "ready";
                draw();
            }
        }, type === "wheat" ? 3000 : 7000);
    }
}

function harvest() {
    if(selected !== null && data.plots[selected].stage === "ready") {
        data.inv[data.plots[selected].type]++;
        data.plots[selected] = {type: "", stage: ""};
        draw();
    }
}

function craft(prod) {
    if(prod === 'bread' && data.inv.wheat >= 3) {
        data.inv.wheat -= 3;
        data.prods.bread++;
        alert("ğŸ¥– ØªÙ… Ø®Ø¨Ø² Ø±ØºÙŠÙ ÙØ§Ø®Ø±!");
    } else if(prod === 'sauce' && data.inv.tomato >= 2) {
        data.inv.tomato -= 2;
        data.prods.sauce++;
        alert("ğŸ¥« ØªÙ… ØµÙ†Ø¹ ØµÙ„ØµØ© Ø³Ø±ÙŠØ©!");
    } else {
        alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ù…ÙˆØ§Ø¯ Ø®Ø§Ù… ÙƒØ§ÙÙŠØ©!");
    }
    draw();
}

function sellProducts() {
    let total = (data.prods.bread * 150) + (data.prods.sauce * 200);
    if(total > 0) {
        data.money += total;
        data.prods = { bread: 0, sauce: 0 };
        alert(`ğŸ’° Ù…Ø¨Ø±ÙˆÙƒ! Ø¨Ø¹Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ù€ ${total} Ø°Ù‡Ø¨Ø©!`);
        draw();
    } else {
        alert("Ù„Ù… ØªØµÙ†Ø¹ Ø´ÙŠØ¦Ø§Ù‹ Ù„Ø¨ÙŠØ¹Ù‡ Ø¨Ø¹Ø¯!");
    }
}

function buyLand() {
    if(data.money >= 50) {
        data.money -= 50;
        data.land++;
        data.plots.push({type: "", stage: ""});
        draw();
    }
}

draw();
</script>
</body>
</html>
