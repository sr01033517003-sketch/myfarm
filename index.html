<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</title>

<style>
body{font-family:tahoma;margin:0;background:#4caf50;text-align:center}
.box{background:#fff;padding:15px;margin:20px;border-radius:12px}
input,button{padding:10px;margin:5px;font-size:16px;border-radius:8px}
.farm{display:grid;grid-template-columns:repeat(5,60px);gap:6px;justify-content:center}
.plot{width:60px;height:60px;background:#6d4c41;color:white;font-size:26px;
display:flex;align-items:center;justify-content:center;border-radius:8px}
.top{background:#795548;color:white;padding:10px}
.hidden{display:none}
.chat{background:#eee;height:120px;overflow:auto;margin:10px;padding:5px}
</style>
</head>

<body>

<div id="loginBox" class="box">
<h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
<input id="user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
<input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"><br>
<button onclick="login()">Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„</button>
</div>

<div id="game" class="hidden">
<div class="top">
ğŸ‘¤ <span id="player"></span> |
ğŸ’° <span id="money">0</span>
<button onclick="logout()">Ø®Ø±ÙˆØ¬</button>
</div>

<div class="farm" id="farm"></div>

<button onclick="plant()">ğŸŒ± Ø²Ø±Ø¹</button>
<button onclick="harvest()">ğŸŒ¾ Ø­ØµØ§Ø¯</button>

<div class="box">
<h3>ğŸ„ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</h3>
ğŸ„ Ø¨Ù‚Ø±Ø© | ğŸ‘ Ø®Ø±ÙˆÙ | ğŸ” Ø¯Ø¬Ø§Ø¬Ø© | ğŸ Ø­ØµØ§Ù†
</div>

<div class="box">
<h3>ğŸ’¬ Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</h3>
<div class="chat" id="chat"></div>
<input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
<button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>
</div>

<script>
let currentUser="";
let selected=null;
let data={money:50,farm:Array(25).fill("")};

function login(){
let u=user.value,p=pass.value;
if(!u||!p)return;
currentUser=u;
let saved=localStorage.getItem("farm_"+u);
if(saved)data=JSON.parse(saved);
player.innerText=u;
money.innerText=data.money;
loginBox.classList.add("hidden");
game.classList.remove("hidden");
drawFarm();
loadChat();
}

function logout(){
save();
location.reload();
}

function save(){
localStorage.setItem("farm_"+currentUser,JSON.stringify(data));
}

function drawFarm(){
farm.innerHTML="";
data.farm.forEach((v,i)=>{
let d=document.createElement("div");
d.className="plot";
d.innerText=v;
d.onclick=()=>selected=i;
farm.appendChild(d);
});
}

function plant(){
if(selected===null)return;
if(data.farm[selected]===""){
data.farm[selected]="ğŸŒ±";
data.money-=2;
update();
setTimeout(()=>{
if(data.farm[selected]==="ğŸŒ±"){
data.farm[selected]="ğŸŒ¾";
drawFarm();save();
}},4000);
}
}

function harvest(){
if(selected===null)return;
if(data.farm[selected]==="ğŸŒ¾"){
data.farm[selected]="";
data.money+=5;
update();
}
}

function update(){
money.innerText=data.money;
drawFarm();save();
}

/* ====== Ø§Ù„Ø´Ø§Øª ====== */
function loadChat(){
chat.innerHTML=localStorage.getItem("chat")||"";
}

function send(){
let text=msg.value;
if(!text)return;
let line=`<div><b>${currentUser}:</b> ${text}</div>`;
chat.innerHTML+=line;
localStorage.setItem("chat",chat.innerHTML);
msg.value="";
}
</script>

</body>
</html>
