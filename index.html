<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        
        * { box-sizing: border-box; }
        body { 
            background: #2e7d32; 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            color: #fff;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-bar { 
            background: #1b5e20; 
            height: 70px; 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            border-bottom: 4px solid #ffd700;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .stat { background: rgba(255,255,255,0.1); padding: 8px 15px; border-radius: 15px; border: 1px solid #ffd700; font-size: 14px; font-weight: 900; }

        .container { display: flex; flex: 1; overflow: hidden; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…ØªØ¬Ø± + Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©) - Ø«Ø§Ø¨ØªØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹ */
        .sidebar { 
            width: 280px; 
            background: #B2DFDB; 
            color: #004D40; 
            display: flex; 
            flex-direction: column; 
            padding: 15px; 
            border-left: 5px solid #00897B;
            z-index: 100;
        }

        /* Ø§Ù„Ù…ØªØ¬Ø± */
        .shop-box { background: #80CBC4; padding: 10px; border-radius: 10px; margin-bottom: 15px; }
        .buy-btn { 
            width: 100%; padding: 10px; margin: 5px 0; border: none; 
            background: #ef6c00; color: white; border-radius: 8px; 
            font-weight: bold; cursor: pointer; font-family: 'Cairo';
        }
        .buy-btn:hover { background: #e65100; }

        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .chat-box { flex: 1; background: white; border-radius: 10px; padding: 10px; overflow-y: auto; display: flex; flex-direction: column; gap: 5px; border: 1px solid #004D40; }
        .chat-msg { font-size: 12px; color: #333; background: #f1f1f1; padding: 5px; border-radius: 5px; }
        .chat-input-area { display: flex; gap: 5px; margin-top: 10px; }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .play-area { flex: 1; background: #4caf50; position: relative; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª */
        .animal-pen { 
            width: 95%; height: 250px; background: rgba(255,255,255,0.1); 
            border: 3px dashed #fff; border-radius: 30px; position: relative; margin-bottom: 20px;
        }
        .chicken-entity { 
            position: absolute; width: 90px; height: 90px; 
            transition: all 3s linear; cursor: pointer;
            filter: drop-shadow(4px 4px 4px rgba(0,0,0,0.4));
        }

        /* Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© */
        .grid { 
            display: grid; grid-template-columns: repeat(4, 80px); gap: 12px; 
            background: #5d4037; padding: 20px; border-radius: 20px; border: 8px solid #3e2723;
        }
        .plot { 
            width: 80px; height: 80px; background: #6d4c41; border-radius: 10px; 
            display: flex; align-items: center; justify-content: center; 
            cursor: pointer; position: relative; font-size: 35px; border: 2px solid #3d1c02;
        }
        .timer-label { position: absolute; bottom: 0; width: 100%; background: #000; color: #0f0; font-size: 11px; text-align: center; border-radius: 0 0 8px 8px; }

        /* Ø²Ø± Ø§Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ */
        .collect-all-btn { 
            position: fixed; bottom: 20px; right: 300px; 
            background: #1565C0; color: white; padding: 15px 40px; 
            border-radius: 50px; border: none; font-size: 20px; 
            font-weight: 900; cursor: pointer; box-shadow: 0 6px #0D47A1;
        }

        #login-screen { position: fixed; inset: 0; background: #1b5e20; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen">
    <div style="background:white; padding:40px; border-radius:20px; text-align:center; color:#333;">
        <h2>ğŸŒ¾ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰</h2>
        <input type="text" id="p-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:12px; width:220px; font-family:'Cairo'; border: 2px solid #2e7d32; border-radius: 10px;"><br><br>
        <button onclick="startGame()" class="buy-btn" style="background:#2e7d32; font-size:18px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div class="top-bar">
    <div class="stat">ğŸ’° Ø°Ù‡Ø¨: <span id="gold-val">1000</span></div>
    <div class="stat">ğŸ¥š Ø¨ÙŠØ¶: <span id="egg-val">0</span></div>
    <div class="stat">ğŸŒ¾ Ø¨Ø°ÙˆØ±: <span id="seed-val">5</span></div>
    <div class="stat">ğŸšœ Ù…Ø¹Ø¯Ø§Øª: <span id="tool-val">0</span></div>
</div>

<div class="container">
    <div class="sidebar">
        <h3 style="margin:0 0 10px 0; text-align:center;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª</h3>
        <div class="shop-box">
            <button class="buy-btn" onclick="buy('seed', 50)">ğŸŒ± Ø¨Ø°ÙˆØ± Ø¨Ø±Ø³ÙŠÙ… (50ğŸ’°)</button>
            <button class="buy-btn" onclick="buy('chicken', 200)">ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© Ø¨ÙŠØ§Ø¶Ø© (200ğŸ’°)</button>
            <button class="buy-btn" onclick="buy('tractor', 1500)">ğŸšœ Ø¬Ø±Ø§Ø± Ø¢Ù„ÙŠ (1500ğŸ’°)</button>
        </div>

        <h3 style="margin:10px 0 10px 0; text-align:center;">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h3>
        <div class="chat-box" id="chat-content">
            <div class="chat-msg"><b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©!</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="msg-input" style="flex:1; border-radius:5px; border:1px solid #ccc; padding:5px;">
            <button onclick="sendMsg()" style="background:#00897B; border:none; color:white; padding:5px 10px; border-radius:5px;">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <div class="play-area">
        <h3 style="margin:0;">ğŸ¾ Ø³Ø§Ø­Ø© Ø§Ù„Ø¯ÙˆØ§Ø¬Ù† ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</h3>
        <div class="animal-pen" id="animal-pen"></div>

        <h3 style="margin:20px 0 10px 0;">ğŸŒ± Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ù„Ù†Ù…Ùˆ)</h3>
        <div class="grid" id="crop-grid"></div>
    </div>
</div>

<button class="collect-all-btn" onclick="sellAll()">Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ ÙƒÙ„ Ø´ÙŠØ¡) ğŸ’°</button>

<script>
    let farm = { gold: 1000, eggs: 0, seeds: 5, chickens: 0, crops: 0, tools: 0 };
    const CHICKEN_IMAGE = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function startGame() {
        let name = document.getElementById('p-name').value;
        if(!name) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");
        document.getElementById('login-screen').classList.add('hidden');
        initGrid();
        setInterval(moveAnimals, 3000);
        setInterval(() => { if(farm.chickens > 0) { farm.eggs += farm.chickens; updateUI(); } }, 10000);
    }

    function initGrid() {
        const grid = document.getElementById('crop-grid');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            grid.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--;
            p.innerHTML = "ğŸŒ±";
            let time = 180;
            let lbl = document.createElement('div');
            lbl.className = 'timer-label';
            p.appendChild(lbl);
            updateUI();

            let timer = setInterval(() => {
                time--;
                let m = Math.floor(time/60), s = time%60;
                lbl.innerText = `${m}:${s < 10 ? '0'+s : s}`;
                if(time <= 0) {
                    clearInterval(timer);
                    p.innerHTML = "ğŸŒ¿";
                    p.onclick = () => { farm.crops++; p.innerHTML = ""; p.onclick = () => plant(p); updateUI(); };
                }
            }, 1000);
        } else if (farm.seeds <= 0) {
            alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ø¨Ø°ÙˆØ±! Ø§Ø´ØªØ±ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†.");
        }
    }

    function buy(item, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            if(item === 'seed') farm.seeds += 5;
            if(item === 'tractor') farm.tools++;
            if(item === 'chicken') {
                farm.chickens++;
                let img = document.createElement('img');
                img.src = CHICKEN_IMAGE;
                img.className = 'chicken-entity';
                img.style.left = "50%"; img.style.top = "50%";
                document.getElementById('animal-pen').appendChild(img);
            }
            updateUI();
            addChat("Ø§Ù„Ù†Ø¸Ø§Ù…", `Ù…Ø¨Ø±ÙˆÙƒ Ø´Ø±Ø§Ø¡ ${item}!`);
        } else alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!");
    }

    function moveAnimals() {
        let cs = document.getElementsByClassName('chicken-entity');
        for(let c of cs) {
            c.style.left = Math.random() * 85 + "%";
            c.style.top = Math.random() * 65 + "%";
        }
    }

    function sellAll() {
        let total = (farm.eggs * 25) + (farm.crops * 60);
        if(total > 0) {
            farm.gold += total; farm.eggs = 0; farm.crops = 0;
            updateUI();
            addChat("Ø£Ù†Øª", `Ø¨Ø¹Øª Ø§Ù„Ù…Ø­ØµÙˆÙ„ ÙˆØ§Ù„Ø¨ÙŠØ¶ ÙˆØ±Ø¨Ø­Øª ${total} Ø°Ù‡Ø¨Ø©!`);
            alert("ØªÙ… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­!");
        }
    }

    function sendMsg() {
        let inp = document.getElementById('msg-input');
        if(inp.value) { addChat("Ø£Ù†Øª", inp.value); inp.value = ""; }
    }

    function addChat(user, text) {
        let box = document.getElementById('chat-content');
        box.innerHTML += `<div class="chat-msg"><b>${user}:</b> ${text}</div>`;
        box.scrollTop = box.scrollHeight;
    }

    function updateUI() {
        document.getElementById('gold-val').innerText = farm.gold;
        document.getElementById('egg-val').innerText = farm.eggs;
        document.getElementById('seed-val').innerText = farm.seeds;
        document.getElementById('tool-val').innerText = farm.tools;
    }
</script>
</body>
</html>
