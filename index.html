<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ù†Ø¸Ø§Ù… Ø´Ø±Ø§Ø¡ Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }
        
        body { background: #1b5e20; height: 100vh; overflow: hidden; display: flex; flex-direction: column; color: white; }

        /* HUD - Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .hud {
            height: 70px; background: rgba(0,0,0,0.85); display: flex;
            justify-content: space-around; align-items: center; border-bottom: 3px solid #ffd700;
        }
        .stat { background: #fff; color: #2e7d32; padding: 5px 15px; border-radius: 10px; border: 2px solid #ffd700; font-weight: 900; min-width: 110px; text-align: center; font-size: 13px; }
        
        .xp-box { text-align: center; width: 220px; }
        .xp-bg { width: 100%; height: 10px; background: #333; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .xp-bar { width: 0%; height: 100%; background: #00bcd4; transition: 0.4s; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm-world { flex: 1; display: flex; justify-content: center; align-items: center; background: radial-gradient(#4caf50, #1b5e20); }
        .grid {
            display: grid; grid-template-columns: repeat(6, 110px); gap: 10px;
            padding: 20px; background: rgba(0,0,0,0.2); border-radius: 20px; border: 4px solid #3e2723;
        }
        
        .soil {
            width: 110px; height: 110px; border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 40px; position: relative; transition: 0.3s;
        }
        .unlocked { background: #6d4c41; border: 3px solid #3e2723; cursor: pointer; }
        .locked { background: rgba(0,0,0,0.4); border: 2px dashed #fff; opacity: 0.3; cursor: not-allowed; }

        /* Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .side-shop { 
            position: fixed; right: 10px; top: 80px; bottom: 100px; width: 210px; 
            background: rgba(255,255,255,0.95); padding: 15px; border-radius: 20px; 
            border: 3px solid #2e7d32; color: #333; display: flex; flex-direction: column; gap: 10px;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
        }
        .shop-btn {
            width: 100%; padding: 12px; border: none; border-radius: 12px; 
            cursor: pointer; font-weight: 900; font-family: 'Cairo'; font-size: 13px;
            color: white; transition: 0.2s;
        }
        .b-seed { background: #ff9800; box-shadow: 0 4px #e65100; }
        .b-expand { background: #9c27b0; box-shadow: 0 4px #7b1fa2; }
        .b-sell { background: #2196f3; box-shadow: 0 4px #1976d2; margin-top: auto; }
        .shop-btn:active { transform: translateY(2px); box-shadow: none; }
        .shop-btn:disabled { background: #bbb !important; cursor: not-allowed; box-shadow: none; }

        /* Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .chat-area { 
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); 
            width: 400px; background: rgba(0,0,0,0.85); padding: 10px; 
            border-radius: 15px 15px 0 0; border: 1px solid #ffd700;
        }
        #logs { height: 40px; overflow-y: auto; font-size: 12px; color: #eee; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat">ğŸ’° Ø§Ù„Ø°Ù‡Ø¨: <span id="gold">1000</span></div>
        <div class="xp-box">
            <div style="color:#ffd700; font-size:12px;">â­ Ù…Ø³ØªÙˆÙ‰ <span id="lvl">1</span></div>
            <div class="xp-bg"><div class="xp-bar" id="xp-bar"></div></div>
        </div>
        <div class="stat">ğŸŒ± Ø¨Ø°ÙˆØ±: <span id="seeds">10</span></div>
        <div class="stat">ğŸŒ¾ Ù…Ø®Ø²Ù†: <span id="inv">0</span></div>
    </div>

    <div class="side-shop">
        <h3 style="text-align: center; color: #2e7d32;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h3>
        <button class="shop-btn b-seed" onclick="buySeeds()">ğŸŒ± Ø¨Ø°ÙˆØ± (50ğŸ’°)</button>
        
        <button id="btn-expand" class="shop-btn b-expand" onclick="expandFarm()">
            ğŸ—ï¸ Ø´Ø±Ø§Ø¡ Ø£Ø±Ø¶ Ø¬Ø¯ÙŠØ¯Ø© 
            <div style="font-size: 10px; font-weight: normal;" id="expand-cost">2000ğŸ’°</div>
        </button>

        <button class="shop-btn b-sell" onclick="sellAll()">ğŸ’° Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ù…Ø­ØµÙˆÙ„</button>
        <p style="font-size: 10px; text-align: center; color: #666;" id="land-count">Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ø§Ù„Ù…ÙØªÙˆØ­Ø©: 6/24</p>
    </div>

    <div class="farm-world">
        <div class="grid" id="grid"></div>
    </div>

    <div class="chat-area">
        <div id="logs"><div><b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> Ø§Ø¨Ø¯Ø£ Ø¨Ù€ 6 Ù‚Ø·Ø¹ Ø£Ø±Ø¶ØŒ ÙˆØ§Ø´ØªØ±Ù Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±!</div></div>
    </div>

<script>
    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ØªØ¨Ø¯Ø£ Ø¨Ù€ 6 Ù‚Ø·Ø¹ Ø£Ø±Ø¶ Ù…ÙØªÙˆØ­Ø©
    let farm = JSON.parse(localStorage.getItem('farm_land_system')) || { 
        gold: 1000, seeds: 10, inv: 0, xp: 0, lvl: 1, unlockedPlots: 6 
    };

    function update() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('seeds').innerText = farm.seeds;
        document.getElementById('inv').innerText = farm.inv;
        document.getElementById('lvl').innerText = farm.lvl;
        document.getElementById('land-count').innerText = `Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ø§Ù„Ù…ÙØªÙˆØ­Ø©: ${farm.unlockedPlots}/24`;
        
        // Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØªÙˆØ³Ø¹: ÙŠØ¨Ø¯Ø£ Ù…Ù† 2000 ÙˆÙŠØ²Ø¯Ø§Ø¯ Ø¨Ù…Ù‚Ø¯Ø§Ø± 1000 Ù„ÙƒÙ„ Ù‚Ø·Ø¹Ø©
        let expandCost = 2000 + (farm.unlockedPlots - 6) * 1000;
        document.getElementById('expand-cost').innerText = `${expandCost}ğŸ’°`;
        
        // Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        let nextXp = farm.lvl * 500;
        document.getElementById('xp-bar').style.width = (farm.xp / nextXp * 100) + "%";

        // Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        document.getElementById('btn-expand').disabled = (farm.gold < expandCost || farm.unlockedPlots >= 24);
        
        localStorage.setItem('farm_land_system', JSON.stringify(farm));
    }

    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© (24 Ù‚Ø·Ø¹Ø© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©)
    function drawGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = "";
        for(let i=0; i<24; i++) {
            let s = document.createElement('div');
            if(i < farm.unlockedPlots) {
                s.className = "soil unlocked";
                s.onclick = () => handleSoil(s);
            } else {
                s.className = "soil locked";
                s.innerHTML = "ğŸ”’";
            }
            grid.appendChild(s);
        }
    }

    function handleSoil(s) {
        if(s.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--; s.innerHTML = "ğŸŒ±"; update();
            setTimeout(() => { s.innerHTML = "ğŸŒ¾"; }, 3000);
        } else if(s.innerHTML === "ğŸŒ¾") {
            s.innerHTML = ""; farm.inv++; farm.xp += 50;
            checkLvl(); update();
        }
    }

    function expandFarm() {
        let expandCost = 2000 + (farm.unlockedPlots - 6) * 1000;
        if(farm.gold >= expandCost) {
            farm.gold -= expandCost;
            farm.unlockedPlots++;
            drawGrid();
            update();
            log("Ø§Ù„Ù…ØªØ¬Ø±", "ØªÙ… Ø´Ø±Ø§Ø¡ Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¶ Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­!");
        }
    }

    function buySeeds() {
        if(farm.gold >= 50) { farm.gold -= 50; farm.seeds += 5; update(); }
    }

    function sellAll() {
        if(farm.inv > 0) {
            let money = farm.inv * 100;
            farm.gold += money; farm.inv = 0;
            update();
            log("Ø§Ù„Ù…ØªØ¬Ø±", `Ø¨Ø¹Øª Ø§Ù„Ù…Ø­ØµÙˆÙ„ Ø¨Ù€ ${money} Ø°Ù‡Ø¨Ø©.`);
        }
    }

    function checkLvl() {
        if(farm.xp >= (farm.lvl * 500)) {
            farm.lvl++; farm.xp = 0; farm.gold += 1000;
            update();
            alert(`â­ Ù…Ø¨Ø±ÙˆÙƒ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${farm.lvl}! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø© 1000 Ø°Ù‡Ø¨Ø©.`);
        }
    }

    function log(u, m) {
        let c = document.getElementById('logs');
        c.innerHTML += `<div><b>${u}:</b> ${m}</div>`;
        c.scrollTop = c.scrollHeight;
    }

    // Ø§Ù„ØªØ´ØºÙŠÙ„
    drawGrid();
    update();
</script>
</body>
</html>
