<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©</title>
    <style>
        body { background: #2e7d32; font-family: 'Segoe UI'; margin: 0; color: white; text-align: center; }
        .top-bar { background: #1b5e20; padding: 10px; display: flex; justify-content: space-around; border-bottom: 4px solid #ffd700; position: sticky; top: 0; z-index: 1000; }
        .stat-box { background: rgba(0,0,0,0.5); padding: 8px 15px; border-radius: 20px; border: 1px solid #ffd700; font-weight: bold; }
        
        .game-world { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        
        /* Ø³Ø§Ø­Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø¨ØµÙˆØ± Ø­Ù‚ÙŠÙ‚ÙŠØ© */
        .zone { background-image: url('https://img.freepik.com/free-vector/pixel-art-grass-background_52683-113066.jpg'); background-size: cover; border: 6px solid #5d4037; border-radius: 25px; min-width: 320px; min-height: 280px; position: relative; overflow: hidden; }
        .animal-img { position: absolute; width: 60px; height: 60px; transition: all 3s ease-in-out; filter: drop-shadow(3px 3px 2px rgba(0,0,0,0.3)); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© */
        .farm-grid { display: grid; grid-template-columns: repeat(4, 75px); gap: 10px; background: #4caf50; border: 8px solid #3e2723; border-radius: 20px; padding: 15px; }
        .plot { width: 75px; height: 75px; background: #5d4037; border: 2px solid #3d1c02; border-radius: 10px; position: relative; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 35px; }
        .timer { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.7); color: #00ff00; font-size: 11px; border-radius: 0 0 8px 8px; }

        .shop-panel { background: white; color: #333; max-width: 900px; margin: 20px auto; border-radius: 20px; padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
        .btn-buy { background: #e67e22; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen" style="position:fixed; inset:0; background:#2e7d32; z-index:9999; display:flex; align-items:center; justify-content:center;">
    <div style="background:white; color:black; padding:40px; border-radius:30px; text-align:center;">
        <h2>ğŸŒ¾ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© V11</h2>
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" style="padding:12px; width:220px; font-size:18px;"><br><br>
        <button onclick="login()" style="padding:15px 50px; background:#ffd700; border:none; border-radius:15px; font-weight:bold; cursor:pointer;">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div id="game-ui" class="hidden">
    <div class="top-bar">
        <div class="stat-box">ğŸ’° <span id="gold-val">0</span></div>
        <div class="stat-box">â­ Ù…Ø³ØªÙˆÙ‰: <span id="lvl-val">1</span></div>
        <div class="stat-box">ğŸ¯ Ø¹Ø³Ù„: <span id="honey-val">0</span></div>
    </div>

    <div class="game-world">
        <div class="zone" id="animal-zone">
            <div style="background:#5d4037; color:white; padding:5px; position:absolute; top:0; width:100%; font-size:12px;">Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙˆØ§Ø´ÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©</div>
        </div>

        <div class="zone" style="background:#5d4037; min-width:auto;">
            <div class="farm-grid" id="grid"></div>
        </div>
    </div>

    <button onclick="sellAll()" style="background:#2ecc71; color:white; padding:15px 60px; border:none; border-radius:50px; font-size:20px; font-weight:bold; cursor:pointer; margin:20px;">ğŸ’° Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ğŸ’°</button>

    <div class="shop-panel">
        <div style="text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/1864/1864470.png" width="50"><br>
            Ø¯Ø¬Ø§Ø¬Ø© (100 ğŸ’°) <button class="btn-buy" onclick="buy('chicken', 100)">Ø´Ø±Ø§Ø¡</button>
        </div>
        <div style="text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/1998/1998610.png" width="50"><br>
            Ø¨Ù‚Ø±Ø© (500 ğŸ’°) <button class="btn-buy" onclick="buy('cow', 500)">Ø´Ø±Ø§Ø¡</button>
        </div>
        <div style="text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/2153/2153282.png" width="50"><br>
            Ø®Ù„ÙŠØ© Ù†Ø­Ù„ (1200 ğŸ’°) <button class="btn-buy" onclick="buy('bee', 1200)">Ø´Ø±Ø§Ø¡</button>
        </div>
    </div>
</div>

<script>
    let farm = { user: "", gold: 2000, lvl: 1, inv: 0, honey: 0, animals: [] };
    const IMAGES = {
        chicken: 'https://i.pinimg.com/originals/f3/d9/04/f3d904f981459a96e95b078a94665476.gif',
        cow: 'https://media.tenor.com/images/73e273069176f140685970c06f366e6a/tenor.gif',
        bee: 'https://cdn-icons-png.flaticon.com/512/2153/2153282.png'
    };

    function login() {
        let u = document.getElementById('username').value.trim();
        if(!u) return;
        let saved = localStorage.getItem('real_farm_v11_' + u);
        if(saved) farm = JSON.parse(saved); else farm.user = u;
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');
        initGrid();
        farm.animals.forEach(type => renderAnimal(type));
        updateUI();
        setInterval(moveAnimals, 4000);
    }

    function initGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = "";
        for(let i=0; i<16; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            grid.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerText === "") {
            p.innerText = "ğŸŒ±";
            let timeLeft = 180;
            let timer = document.createElement('div');
            timer.className = 'timer';
            p.appendChild(timer);
            let count = setInterval(() => {
                timeLeft--;
                timer.innerText = Math.floor(timeLeft/60) + ":" + (timeLeft%60).toString().padStart(2,'0');
                if(timeLeft <= 0) {
                    clearInterval(count);
                    p.innerText = "ğŸŒ¾";
                    p.onclick = () => { farm.inv++; p.innerText = ""; p.onclick = () => plant(p); updateUI(); };
                }
            }, 1000);
        }
    }

    function buy(type, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            farm.animals.push(type);
            renderAnimal(type);
            updateUI();
        } else { alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!"); }
    }

    function renderAnimal(type) {
        let img = document.createElement('img');
        img.src = IMAGES[type];
        img.className = 'animal-img';
        img.style.left = Math.random() * 80 + "%";
        img.style.top = Math.random() * 80 + "%";
        document.getElementById('animal-zone').appendChild(img);
    }

    function moveAnimals() {
        let animals = document.getElementsByClassName('animal-img');
        for(let a of animals) {
            a.style.left = Math.random() * 80 + "%";
            a.style.top = Math.random() * 80 + "%";
        }
    }

    function sellAll() {
        let profit = (farm.inv * 200) + (farm.honey * 500);
        if(profit > 0) {
            farm.gold += profit; farm.inv = 0; farm.honey = 0;
            updateUI();
            alert("ØªÙ… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­!");
        }
    }

    function updateUI() {
        document.getElementById('gold-val').innerText = farm.gold;
        document.getElementById('lvl-val').innerText = Math.floor(farm.gold / 5000) + 1;
        localStorage.setItem('real_farm_v11_' + farm.user, JSON.stringify(farm));
    }
</script>
</body>
    </html>
