<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ù†Ø¹</title>
    <style>
        :root { --gold: #ffd700; --energy: #00bcd4; }
        body { background: #1b5e20; font-family: 'Segoe UI', sans-serif; margin: 0; color: white; }
        
        .header { background: #2e7d32; padding: 10px; display: flex; justify-content: space-around; border-bottom: 4px solid var(--gold); position: sticky; top: 0; z-index: 100; }
        .stat { background: rgba(0,0,0,0.4); padding: 5px 12px; border-radius: 15px; border: 1px solid var(--gold); font-weight: bold; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø·Ø§Ù‚Ø© */
        .energy-bar-container { width: 200px; height: 15px; background: #eee; border-radius: 10px; margin: 10px auto; border: 2px solid #fff; overflow: hidden; }
        #energy-fill { width: 100%; height: 100%; background: var(--energy); transition: 0.5s; }

        .farm-world { display: grid; grid-template-columns: repeat(4, 75px); gap: 8px; justify-content: center; padding: 20px; background: #4caf50; border: 8px solid #3e2723; border-radius: 20px; margin: 10px auto; width: fit-content; }
        .plot { width: 75px; height: 75px; background: #5d4037; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 35px; cursor: pointer; border: 2px solid #3d1c02; }

        .factory-area { background: #fff3e0; color: #333; padding: 15px; margin: 10px; border-radius: 15px; border: 3px dashed #e67e22; }
        .btn { background: #e67e22; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; margin: 5px; }
        
        #login-screen { background: #000; position: fixed; inset: 0; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color:var(--gold)">ğŸŒ¾ Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù…ØµØ§Ù†Ø¹ ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ ğŸ­</h1>
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø­ÙÙˆØ¸..." style="padding:15px; border-radius:10px; border:none; width:250px">
        <br>
        <button onclick="login()" style="padding:15px 50px; background:var(--gold); border:none; border-radius:10px; font-weight:bold; cursor:pointer">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="game" class="hidden">
        <div class="header">
            <div class="stat">ğŸ’° <span id="gold">0</span></div>
            <div class="stat">âš¡ <span id="energy-text">100</span>%</div>
            <div class="stat">ğŸ“¦ <span id="inv">0</span></div>
            <button onclick="location.reload()" style="background:red; color:white; border:none; border-radius:5px">Ø®Ø±ÙˆØ¬</button>
        </div>

        <div class="energy-bar-container"><div id="energy-fill"></div></div>

        <div class="farm-world" id="grid">
            </div>

        <div class="factory-area">
            <h3>ğŸ­ Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…ØµØ§Ù†Ø¹ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2)</h3>
            <p>Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ Ù„Ù…Ù†ØªØ¬Ø§Øª ØºØ§Ù„ÙŠØ© Ø§Ù„Ø«Ù…Ù†!</p>
            <button class="btn" onclick="makeCheese()">ØµÙ†Ø§Ø¹Ø© Ø¬Ø¨Ù†Ø© (ØªØ­ØªØ§Ø¬ Ù„Ø¨Ù†)</button>
            <button class="btn" onclick="makePie()">ØµÙ†Ø§Ø¹Ø© ÙØ·ÙŠØ± (ØªØ­ØªØ§Ø¬ Ù‚Ù…Ø­)</button>
        </div>

        <div style="background:white; color:black; padding:15px; margin:10px; border-radius:15px">
            <h3>ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
            <button class="btn" onclick="sellEverything()" style="background:#2ecc71">Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ù…Ø®Ø²Ù† ğŸ’°</button>
            <button class="btn" onclick="buyEnergy()" style="background:#3498db">Ø´Ø±Ø§Ø¡ Ø·Ø§Ù‚Ø© (50 ğŸ’°)</button>
        </div>
    </div>

    <script>
        let data = { user: "", gold: 1000, inv: 0, energy: 100, lvl: 1 };

        function login() {
            let u = document.getElementById('username').value;
            if(!u) return;
            let saved = localStorage.getItem('pro_farm_' + u);
            if(saved) data = JSON.parse(saved);
            else data.user = u;
            
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            initGrid();
            update();
            setInterval(regenEnergy, 5000); // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø·Ø§Ù‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        }

        function initGrid() {
            const grid = document.getElementById('grid');
            for(let i=0; i<16; i++) {
                let p = document.createElement('div');
                p.className = 'plot';
                p.onclick = () => work(p);
                grid.appendChild(p);
            }
        }

        function work(p) {
            if(p.innerHTML === "" && data.energy >= 10) {
                data.energy -= 10;
                p.innerHTML = "ğŸŒ±";
                update();
                setTimeout(() => {
                    p.innerHTML = "ğŸŒ¾"; // Ù‚Ù…Ø­
                    p.onclick = () => {
                        data.inv++;
                        p.innerHTML = "";
                        p.onclick = () => work(p);
                        update();
                    };
                }, 3000);
            } else if(data.energy < 10) { alert("Ø·Ø§Ù‚ØªÙƒ Ù†ÙØ°Øª! Ø§Ø±ØªØ§Ø­ Ù‚Ù„ÙŠÙ„Ø§Ù‹."); }
        }

        function sellEverything() {
            if(data.inv > 0) {
                data.gold += data.inv * 150;
                data.inv = 0;
                update();
                alert("ØªÙ… Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø­ØµÙˆÙ„!");
            }
        }

        function buyEnergy() {
            if(data.gold >= 50) {
                data.gold -= 50;
                data.energy = Math.min(data.energy + 30, 100);
                update();
            }
        }

        function regenEnergy() {
            if(data.energy < 100) {
                data.energy += 2;
                update();
            }
        }

        function update() {
            document.getElementById('gold').innerText = data.gold;
            document.getElementById('energy-text').innerText = data.energy;
            document.getElementById('energy-fill').style.width = data.energy + "%";
            document.getElementById('inv').innerText = data.inv;
            localStorage.setItem('pro_farm_' + data.user, JSON.stringify(data));
        }
    </script>
</body>
</html>
