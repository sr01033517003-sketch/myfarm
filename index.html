<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± V9 - Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ØµØ¹Ø¨</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }
        
        body { background: #1b5e20; height: 100vh; overflow: hidden; display: flex; flex-direction: column; color: white; }

        .hud {
            height: 70px; background: rgba(0,0,0,0.85); display: flex;
            justify-content: space-around; align-items: center; border-bottom: 3px solid #ffd700;
        }
        .stat { background: #fff; color: #2e7d32; padding: 5px 15px; border-radius: 10px; border: 2px solid #ffd700; font-weight: 900; min-width: 120px; text-align: center; font-size: 13px; }
        
        .xp-box { text-align: center; width: 220px; }
        .xp-bg { width: 100%; height: 10px; background: #333; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .xp-bar { width: 0%; height: 100%; background: #00bcd4; transition: 0.4s; }

        .farm-world { flex: 1; display: flex; justify-content: center; align-items: center; background: radial-gradient(#4caf50, #1b5e20); }
        .grid {
            display: grid; grid-template-columns: repeat(6, 100px); gap: 10px;
            padding: 20px; background: rgba(0,0,0,0.2); border-radius: 20px; border: 4px solid #3e2723;
        }
        
        .soil {
            width: 100px; height: 100px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 35px; position: relative; transition: 0.3s;
        }
        .unlocked { background: #6d4c41; border: 2px solid #3e2723; cursor: pointer; }
        .locked { background: rgba(0,0,0,0.5); border: 2px dashed #666; cursor: not-allowed; color: #aaa; font-size: 20px; }

        .side-shop { 
            position: fixed; right: 10px; top: 80px; bottom: 80px; width: 220px; 
            background: rgba(255,255,255,0.95); padding: 15px; border-radius: 20px; 
            border: 3px solid #2e7d32; color: #333; display: flex; flex-direction: column; gap: 8px;
        }
        .shop-btn {
            width: 100%; padding: 10px; border: none; border-radius: 10px; 
            cursor: pointer; font-weight: 900; font-family: 'Cairo'; font-size: 12px;
            color: white; transition: 0.2s;
        }
        .b-seed { background: #ff9800; }
        .b-expand { background: #9c27b0; border: 2px solid #4a148c; }
        .b-sell { background: #2196f3; margin-top: auto; }
        .shop-btn:disabled { background: #bbb !important; cursor: not-allowed; }

        .price-tag { display: block; font-size: 11px; font-weight: bold; margin-top: 2px; }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat">ğŸ’° <span id="gold">1000</span></div>
        <div class="xp-box">
            <div style="color:#ffd700; font-size:12px;">â­ Ù…Ø³ØªÙˆÙ‰ <span id="lvl">1</span></div>
            <div class="xp-bg"><div class="xp-bar" id="xp-bar"></div></div>
        </div>
        <div class="stat">ğŸŒ± Ø¨Ø°ÙˆØ±: <span id="seeds">10</span></div>
        <div class="stat">ğŸŒ¾ Ù…Ø®Ø²Ù†: <span id="inv">0</span></div>
    </div>

    <div class="side-shop">
        <h3 style="text-align: center; color: #2e7d32;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ</h3>
        <button class="shop-btn b-seed" onclick="buySeeds()">ğŸŒ± Ø¨Ø°ÙˆØ± ÙØ§Ø®Ø±Ø© <span class="price-tag">100ğŸ’°</span></button>
        
        <button id="btn-expand" class="shop-btn b-expand" onclick="expandFarm()">
            ğŸ—ï¸ Ø´Ø±Ø§Ø¡ Ø£Ø±Ø¶ Ø¬Ø¯ÙŠØ¯Ø© 
            <span class="price-tag" id="expand-cost">2000ğŸ’°</span>
        </button>

        <button class="shop-btn b-sell" onclick="sellAll()">ğŸ’° Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„</button>
        <p style="font-size: 10px; text-align: center; color: #666; margin-top: 10px;" id="land-count">Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ: 6/24</p>
    </div>

    <div class="farm-world"><div class="grid" id="grid"></div></div>

<script>
    let farm = JSON.parse(localStorage.getItem('farm_v9')) || { 
        gold: 1000, seeds: 10, inv: 0, xp: 0, lvl: 1, unlockedPlots: 6 
    };

    function update() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('seeds').innerText = farm.seeds;
        document.getElementById('inv').innerText = farm.inv;
        document.getElementById('lvl').innerText = farm.lvl;
        document.getElementById('land-count').innerText = `Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ø§Ù„Ù…ÙØªÙˆØ­Ø©: ${farm.unlockedPlots}/24`;
        
        // Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØªÙˆØ³Ø¹Ø© (Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹ ÙˆØªØµØ§Ø¹Ø¯ÙŠ)
        // Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„Ø³Ø§Ø¨Ø¹Ø© Ø¨Ù€ 2000ØŒ Ø§Ù„Ø«Ø§Ù…Ù†Ø© Ø¨Ù€ 3500ØŒ ÙˆÙ‡ÙƒØ°Ø§
        let expandCost = 2000 + (farm.unlockedPlots - 6) * 1500;
        document.getElementById('expand-cost').innerText = `${expandCost}ğŸ’°`;
        
        let nextXp = farm.lvl * 600;
        document.getElementById('xp-bar').style.width = (farm.xp / nextXp * 100) + "%";

        document.getElementById('btn-expand').disabled = (farm.gold < expandCost || farm.unlockedPlots >= 24);
        
        localStorage.setItem('farm_v9', JSON.stringify(farm));
    }

    function drawGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = "";
        for(let i=0; i<24; i++) {
            let s = document.createElement('div');
            if(i < farm.unlockedPlots) {
                s.className = "soil unlocked";
                s.onclick = () => handleSoil(s);
            } else {
                s.className = "soil locked";
                s.innerHTML = "ğŸ”’";
            }
            grid.appendChild(s);
        }
    }

    function handleSoil(s) {
        if(s.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--; s.innerHTML = "ğŸŒ±"; update();
            setTimeout(() => { s.innerHTML = "ğŸŒ¾"; }, 3500);
        } else if(s.innerHTML === "ğŸŒ¾") {
            s.innerHTML = ""; farm.inv++; farm.xp += 70;
            checkLvl(); update();
        }
    }

    function expandFarm() {
        let expandCost = 2000 + (farm.unlockedPlots - 6) * 1500;
        if(farm.gold >= expandCost) {
            farm.gold -= expandCost;
            farm.unlockedPlots++;
            
            // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆØ³Ø¹
            let reward = "";
            if(Math.random() < 0.3) {
                let gift = 500;
                farm.gold += gift;
                reward = `\nğŸ ÙˆØ¬Ø¯Øª ÙƒÙ†Ø²Ø§Ù‹ Ù…Ø¯ÙÙˆÙ†Ø§Ù‹ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ${gift} Ø°Ù‡Ø¨Ø©!`;
            }

            drawGrid();
            update();
            alert(`ğŸŠ Ù…Ø¨Ø±ÙˆÙƒ! Ù‚Ù…Øª Ø¨ØªÙˆØ³Ø¹Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø¨Ø³Ø¹Ø± ${expandCost} Ø°Ù‡Ø¨Ø©.${reward}`);
        }
    }

    function buySeeds() {
        if(farm.gold >= 100) { farm.gold -= 100; farm.seeds += 5; update(); }
        else { alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ø°Ù‡Ø¨Ø§Ù‹ ÙƒØ§ÙÙŠØ§Ù‹ Ù„Ù„Ø¨Ø°ÙˆØ±!"); }
    }

    function sellAll() {
        if(farm.inv > 0) {
            let money = farm.inv * 150; // Ø³Ø¹Ø± Ø¨ÙŠØ¹ Ù…Ø±ØªÙØ¹ Ù„ØªØ¹ÙˆÙŠØ¶ ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙˆØ³Ø¹
            farm.gold += money; farm.inv = 0;
            update();
            alert(`ğŸ’° Ø¨Ø¹Øª Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ Ø¨Ù€ ${money} Ø°Ù‡Ø¨Ø©! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¬Ù…Ø¹ Ù„Ù„ØªÙˆØ³Ø¹Ø©.`);
        }
    }

    function checkLvl() {
        let nextXp = farm.lvl * 600;
        if(farm.xp >= nextXp) {
            farm.lvl++; farm.xp = 0; farm.gold += 1200;
            update();
            alert(`â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${farm.lvl}! Ø²Ø§Ø¯Øª Ø´Ù‡Ø±ØªÙƒ ÙˆØ­ØµÙ„Øª Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø© Ù…Ù„ÙƒÙŠØ©.`);
        }
    }

    drawGrid();
    update();
</script>
</body>
    </html>
