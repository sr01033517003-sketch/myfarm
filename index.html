<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</title>
    <style>
        :root { --gold: #ffd700; --grass: #4caf50; --dirt: #795548; }
        body { background: #1b5e20; font-family: 'Segoe UI', Tahoma; color: white; margin: 0; text-align: center; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
        #auth-screen { background: rgba(0,0,0,0.9); position: fixed; inset: 0; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        input { padding: 12px; margin: 10px; border-radius: 8px; border: none; width: 250px; }

        /* Ø±Ø£Ø³ Ø§Ù„Ù„Ø¹Ø¨Ø© */
        .header { background: #2e7d32; padding: 15px; display: flex; justify-content: space-around; border-bottom: 4px solid var(--gold); position: sticky; top: 0; z-index: 100; }
        
        /* Ø£Ø±Ø¶ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm-grid { display: grid; grid-template-columns: repeat(4, 80px); gap: 10px; justify-content: center; padding: 20px; background: var(--grass); border: 10px solid #3e2723; border-radius: 20px; width: fit-content; margin: 20px auto; }
        .plot { width: 80px; height: 80px; background: var(--dirt); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 35px; cursor: pointer; border: 2px solid #3d1c02; }

        /* Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ù…Ø®Ø²Ù†) */
        .panel { background: white; color: black; margin: 10px; padding: 15px; border-radius: 15px; max-height: 300px; overflow-y: auto; }
        .item-card { display: inline-block; border: 1px solid #ddd; padding: 10px; margin: 5px; border-radius: 10px; width: 100px; }
        button { cursor: pointer; background: #e67e22; color: white; border: none; padding: 8px; border-radius: 5px; font-weight: bold; }
        
        .hidden { display: none !important; }
        .animal-area { font-size: 40px; margin: 20px; min-height: 50px; background: rgba(255,255,255,0.1); border-radius: 20px; padding: 10px; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <h1>ğŸŒ¾ Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø© ğŸŒ¾</h1>
        <input type="text" id="username" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
        <button onclick="login()" style="font-size: 20px; padding: 10px 40px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</button>
    </div>

    <div id="game-ui" class="hidden">
        <div class="header">
            <div>ğŸ‘¤ <span id="display-name"></span></div>
            <div>ğŸ’° Ø°Ù‡Ø¨: <span id="gold">1000</span></div>
            <div>â­ Ù…Ø³ØªÙˆÙ‰: <span id="lvl">1</span></div>
            <button onclick="logout()" style="background:red">Ø®Ø±ÙˆØ¬</button>
        </div>

        <div class="animal-area" id="animal-zone">
            ğŸ  Ø§Ù„Ø­Ø¸ÙŠØ±Ø©: 
        </div>

        <div class="farm-grid" id="farm">
            <div class="plot" onclick="work(this)"></div><div class="plot" onclick="work(this)"></div>
            <div class="plot" onclick="work(this)"></div><div class="plot" onclick="work(this)"></div>
            <div class="plot" onclick="work(this)"></div><div class="plot" onclick="work(this)"></div>
            <div class="plot" onclick="work(this)"></div><div class="plot" onclick="work(this)"></div>
        </div>

        <div class="panel">
            <h3>ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø´Ø§Ù…Ù„ (Ø­ÙŠÙˆØ§Ù†Ø§ØªØŒ Ù…Ø­Ø§ØµÙŠÙ„ØŒ Ø£Ø´Ø¬Ø§Ø±ØŒ Ø¢Ù„Ø§Øª)</h3>
            <div id="shop">
                <div class="item-card">ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø©<br>50ğŸ’°<br><button onclick="buy('ğŸ¥', 50, 'animal')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸ„ Ø¨Ù‚Ø±Ø©<br>200ğŸ’°<br><button onclick="buy('ğŸ„', 200, 'animal')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸ Ø­ØµØ§Ù†<br>500ğŸ’°<br><button onclick="buy('ğŸ', 500, 'animal')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸ• ÙƒÙ„Ø¨ Ø´Ø±Ø³<br>300ğŸ’°<br><button onclick="buy('ğŸ•', 300, 'animal')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸ Ø´Ø¬Ø± ØªÙØ§Ø­<br>150ğŸ’°<br><button onclick="buy('ğŸ', 150, 'tree')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸŒ Ø´Ø¬Ø± Ù…ÙˆØ²<br>150ğŸ’°<br><button onclick="buy('ğŸŒ', 150, 'tree')">Ø´Ø±Ø§Ø¡</button></div>
                <div class="item-card">ğŸšœ Ø¬Ø±Ø§Ø±<br>1000ğŸ’°<br><button onclick="buy('ğŸšœ', 1000, 'machine')">Ø´Ø±Ø§Ø¡</button></div>
            </div>
        </div>

        <div class="panel" style="background: #fff3e0;">
            <h3>ğŸ“¦ Ø§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h3>
            <div id="inventory-list">ÙØ§Ø±Øº</div>
            <button onclick="sellAll()" style="background:#2ecc71; margin-top:10px;">Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ù…Ø­ØµÙˆÙ„ ÙÙŠ Ø§Ù„Ù…Ø®Ø²Ù†</button>
        </div>
    </div>

    <script>
        let userData = { name: "", gold: 1000, lvl: 1, inventory: 0, animals: [], trees: [] };

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function login() {
            let user = document.getElementById('username').value;
            if(!user) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø£ÙˆÙ„!");
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
            let saved = localStorage.getItem('farm_' + user);
            if(saved) {
                userData = JSON.parse(saved);
            } else {
                userData.name = user;
            }
            
            document.getElementById('auth-screen').classList.add('hidden');
            document.getElementById('game-ui').classList.remove('hidden');
            updateUI();
        }

        function updateUI() {
            document.getElementById('display-name').innerText = userData.name;
            document.getElementById('gold').innerText = userData.gold;
            document.getElementById('lvl').innerText = userData.lvl;
            document.getElementById('inv').innerText = userData.inventory;
            document.getElementById('inventory-list').innerText = "Ù…Ø­Ø§ØµÙŠÙ„ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¨ÙŠØ¹: " + userData.inventory;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª
            let zone = document.getElementById('animal-zone');
            zone.innerHTML = "ğŸ  Ø§Ù„Ø­Ø¸ÙŠØ±Ø©: " + (userData.animals.join(" ") || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­ÙŠÙˆØ§Ù†Ø§Øª");
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©
            localStorage.setItem('farm_' + userData.name, JSON.stringify(userData));
        }

        function buy(item, price, type) {
            if(userData.gold >= price) {
                userData.gold -= price;
                if(type === 'animal') userData.animals.push(item);
                if(type === 'tree') userData.animals.push(item); // Ù†Ø¶Ø¹Ù‡Ø§ ÙÙŠ Ø§Ù„Ø­Ø¸ÙŠØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØªØ¨Ø³ÙŠØ·
                updateUI();
                alert("Ù…Ø¨Ø±ÙˆÙƒ Ø´Ø±Ø§Ø¡ " + item);
            } else {
                alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ! Ø§Ø´Ø­Ù† Ø£Ùˆ Ø§Ø²Ø±Ø¹ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ù„.");
            }
        }

        function work(plot) {
            if(plot.innerHTML === "") {
                plot.innerHTML = "ğŸŒ±";
                setTimeout(() => {
                    plot.innerHTML = "ğŸŒ½";
                    plot.onclick = () => {
                        userData.inventory++;
                        plot.innerHTML = "";
                        plot.onclick = () => work(plot);
                        updateUI();
                    };
                }, 3000);
            }
        }

        function sellAll() {
            if(userData.inventory > 0) {
                userData.gold += userData.inventory * 100;
                userData.inventory = 0;
                updateUI();
                alert("ØªÙ… Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø­ØµÙˆÙ„ ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨!");
            }
        }

        function logout() {
            location.reload();
        }
    </script>
</body>
    </html>
