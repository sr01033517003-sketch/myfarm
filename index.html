<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>مزرعتي الواقعية</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
<style>
body { margin:0; padding:0; }
#game-container { width:100%; height:100vh; }
</style>
</head>
<body>
<div id="game-container"></div>

<script>
const config = {
    type: Phaser.AUTO,
    width: 600,
    height: 400,
    parent: 'game-container',
    physics: { default: 'arcade', arcade: { debug: false } },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

const game = new Phaser.Game(config);
let playerData = { gold:500, inventory:{}, farm:[], level:1 };

function preload() {
    // تحميل صور الأرضية والحيوانات والمحاصيل
    this.load.image('grass', 'https://i.imgur.com/JlZx1ZV.png'); // أرضية خضراء
    this.load.image('dirt', 'https://i.imgur.com/8Y3Q5Bf.png');  // تربة
    this.load.spritesheet('chicken', 'https://i.imgur.com/KhH1F4M.png', { frameWidth:32, frameHeight:32 });
    this.load.spritesheet('cow', 'https://i.imgur.com/3pXvRSR.png', { frameWidth:32, frameHeight:32 });
    this.load.image('tomato', 'https://i.imgur.com/YJ2RslQ.png'); // مثال محصول
}

let farmTiles = [];

function create() {
    // إنشاء مزرعة 5x5
    for(let y=0; y<5; y++){
        for(let x=0; x<5; x++){
            let tile = this.add.image(50 + x*100, 50 + y*70, 'dirt').setInteractive();
            tile.on('pointerdown', () => plantCrop(tile, x + y*5));
            farmTiles.push({sprite: tile, crop:null});
        }
    }

    // إنشاء بعض الحيوانات
    this.chicken = this.add.sprite(400, 100, 'chicken').play('walkChicken');
    this.cow = this.add.sprite(500, 200, 'cow').play('walkCow');

    // إنشاء الرسوم المتحركة
    this.anims.create({
        key: 'walkChicken',
        frames: this.anims.generateFrameNumbers('chicken', { start:0, end:3 }),
        frameRate:4,
        repeat:-1
    });
    this.anims.create({
        key: 'walkCow',
        frames: this.anims.generateFrameNumbers('cow', { start:0, end:3 }),
        frameRate:2,
        repeat:-1
    });
}

function update(){}

// زرع المحاصيل
function plantCrop(tile, index){
    const crop = prompt('اختر محصول للزرع: طماطم');
    if(crop==='طماطم'){
        if(farmTiles[index].crop) return alert('يوجد محصول هنا!');
        let cropSprite = game.scene.scenes[0].add.image(tile.x, tile.y-20, 'tomato');
        farmTiles[index].crop = cropSprite;
        alert('تم زرع ' + crop);
    }
}
</script>
</body>
</html>
