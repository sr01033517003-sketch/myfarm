<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± V7 - Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¨Ù‚Ø§Ø± ÙˆØ§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }
        
        body { background: #1b5e20; height: 100vh; overflow: hidden; display: flex; flex-direction: column; color: white; }

        /* Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .hud {
            height: 80px; background: rgba(0,0,0,0.85); display: flex;
            justify-content: space-around; align-items: center; border-bottom: 4px solid #ffd700;
        }
        .stat { background: #fff; color: #2e7d32; padding: 5px 12px; border-radius: 10px; border: 2px solid #ffd700; font-weight: 900; min-width: 100px; text-align: center; font-size: 13px; }
        
        .xp-box { text-align: center; width: 200px; }
        .xp-bg { width: 100%; height: 10px; background: #333; border-radius: 10px; overflow: hidden; margin-top: 5px; }
        .xp-bar { width: 0%; height: 100%; background: #00bcd4; transition: 0.4s; }

        /* Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm-world { flex: 1; display: flex; justify-content: center; align-items: center; background: radial-gradient(#4caf50, #1b5e20); }
        .grid {
            display: grid; grid-template-columns: repeat(8, 90px); gap: 8px;
            padding: 15px; background: rgba(0,0,0,0.3); border-radius: 20px; border: 5px solid #3e2723;
        }
        .soil {
            width: 90px; height: 90px; background: #6d4c41; border-radius: 10px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 30px; border: 1px solid #3e2723; position: relative;
        }

        /* Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ØªØ·ÙˆØ± */
        .side-shop { 
            position: fixed; right: 10px; top: 90px; bottom: 90px; width: 210px; 
            background: rgba(255,255,255,0.95); padding: 15px; border-radius: 20px; 
            border: 3px solid #2e7d32; color: #333; display: flex; flex-direction: column; gap: 10px;
        }
        .shop-btn {
            width: 100%; padding: 10px; border: none; border-radius: 10px; 
            cursor: pointer; font-weight: 900; font-family: 'Cairo'; font-size: 12px;
            color: white; transition: 0.2s;
        }
        .b-seed { background: #ff9800; }
        .b-tractor { background: #f44336; }
        .b-tree { background: #4caf50; }
        .b-cow { background: #795548; }
        .b-sell { background: #2196f3; margin-top: auto; border: 2px solid #0d47a1; }
        .shop-btn:disabled { background: #bbb !important; cursor: not-allowed; opacity: 0.7; }

        /* Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
        .chat-mini { 
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); 
            width: 300px; background: rgba(0,0,0,0.8); padding: 5px; 
            border-radius: 10px 10px 0 0; border: 1px solid #ffd700; font-size: 11px;
        }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat">ğŸ’° <span id="gold">1000</span></div>
        <div class="xp-box">
            <div style="color:#ffd700; font-size:12px;">â­ Ù…Ø³ØªÙˆÙ‰ <span id="lvl">1</span></div>
            <div class="xp-bg"><div class="xp-bar" id="xp-bar"></div></div>
        </div>
        <div class="stat">ğŸŒ± Ø¨Ø°ÙˆØ±: <span id="seeds">10</span></div>
        <div class="stat">ğŸŒ¾ Ù…Ø®Ø²Ù†: <span id="inv">0</span></div>
        <div class="stat">ğŸ¥› Ø­Ù„ÙŠØ¨: <span id="milk">0</span></div>
    </div>

    <div class="side-shop">
        <h3 style="text-align: center;">ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
        <button class="shop-btn b-seed" onclick="buySeeds()">ğŸŒ± Ø¨Ø°ÙˆØ± (50ğŸ’°)</button>
        <button id="btn-tractor" class="shop-btn b-tractor" onclick="useTractor()" disabled>ğŸšœ Ø§Ù„Ø¬Ø±Ø§Ø± (Ù…Ø³ØªÙˆÙ‰ 2)</button>
        <button id="btn-tree" class="shop-btn b-tree" onclick="buyTree()" disabled>ğŸ Ø´Ø¬Ø±Ø© (1000ğŸ’°)</button>
        <button id="btn-cow" class="shop-btn b-cow" onclick="buyCow()" disabled>ğŸ„ Ø¨Ù‚Ø±Ø© (2500ğŸ’°)</button>
        <button class="shop-btn b-sell" onclick="sellAll()">ğŸ’° Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬</button>
    </div>

    <div class="farm-world"><div class="grid" id="grid"></div></div>

    <div class="chat-mini"><div id="logs" style="height:30px; overflow:hidden;"><b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø·ÙˆØ± Ù…Ø²Ø±Ø¹ØªÙƒ Ù„ØªÙØªØ­ Ø§Ù„Ø£Ø¨Ù‚Ø§Ø±.</div></div>

<script>
    let farm = JSON.parse(localStorage.getItem('farm_v7')) || { 
        gold: 1000, seeds: 10, inv: 0, milk: 0, xp: 0, lvl: 1, trees: 0, cows: 0 
    };

    function update() {
        document.getElementById('gold').innerText = Math.floor(farm.gold);
        document.getElementById('seeds').innerText = farm.seeds;
        document.getElementById('inv').innerText = farm.inv;
        document.getElementById('milk').innerText = farm.milk;
        document.getElementById('lvl').innerText = farm.lvl;
        
        let nextXp = farm.lvl * 600;
        document.getElementById('xp-bar').style.width = (farm.xp / nextXp * 100) + "%";

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        document.getElementById('btn-tractor').disabled = (farm.lvl < 2);
        document.getElementById('btn-tree').disabled = (farm.lvl < 3 || farm.gold < 1000);
        document.getElementById('btn-cow').disabled = (farm.lvl < 4 || farm.gold < 2500);
        
        localStorage.setItem('farm_v7', JSON.stringify(farm));
    }

    const grid = document.getElementById('grid');
    for(let i=0; i<32; i++) {
        let s = document.createElement('div');
        s.className = 'soil';
        s.onclick = () => {
            if(s.innerHTML === "" && farm.seeds > 0) {
                farm.seeds--; s.innerHTML = "ğŸŒ±"; update();
                setTimeout(() => { s.innerHTML = "ğŸŒ¾"; }, 3000);
            } else if(s.innerHTML === "ğŸŒ¾") {
                s.innerHTML = ""; farm.inv++; farm.xp += 60;
                checkLvl(); update();
            }
        };
        grid.appendChild(s);
    }

    function useTractor() {
        let count = 0;
        const soils = document.getElementsByClassName('soil');
        for(let s of soils) { if(s.innerHTML === "ğŸŒ¾") { s.innerHTML = ""; count++; } }
        if(count > 0) { farm.inv += count; farm.xp += count * 60; checkLvl(); update(); }
    }

    function buyTree() {
        if(farm.gold >= 1000) {
            farm.gold -= 1000; farm.trees++; update();
            const soils = document.getElementsByClassName('soil');
            for(let s of soils) { if(s.innerHTML === "") { s.innerHTML = "ğŸ"; break; } }
        }
    }

    function buyCow() {
        if(farm.gold >= 2500) {
            farm.gold -= 2500; farm.cows++; update();
            const soils = document.getElementsByClassName('soil');
            for(let s of soils) { if(s.innerHTML === "") { s.innerHTML = "ğŸ„"; break; } }
        }
    }

    // Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø£Ø´Ø¬Ø§Ø± + Ø£Ø¨Ù‚Ø§Ø±)
    setInterval(() => {
        if(farm.trees > 0) { farm.gold += (farm.trees * 25); }
        if(farm.cows > 0) { farm.milk += (farm.cows * 1); }
        update();
    }, 8000);

    function checkLvl() {
        if(farm.xp >= (farm.lvl * 600)) {
            farm.lvl++; farm.xp = 0; farm.gold += 1500; update();
            alert(`ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ÙˆØµÙ„Øª Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${farm.lvl}`);
        }
    }

    function buySeeds() {
        if(farm.gold >= 50) { farm.gold -= 50; farm.seeds += 5; update(); }
    }

    function sellAll() {
        let money = (farm.inv * 100) + (farm.milk * 250);
        if(money > 0) {
            farm.gold += money; farm.inv = 0; farm.milk = 0;
            update();
            alert(`ğŸ’° Ø¨Ø¹Øª Ø§Ù„Ù…Ø­ØµÙˆÙ„ ÙˆØ§Ù„Ø­Ù„ÙŠØ¨ ÙˆØ±Ø¨Ø­Øª ${money} Ø°Ù‡Ø¨Ø©!`);
        }
    }

    update();
</script>
</body>
    </html>
