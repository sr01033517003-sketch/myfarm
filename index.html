<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

        body { 
            background: #4CAF50;
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            color: #333; 
            overflow: hidden;
            display: flex; 
            flex-direction: column; 
            height: 100vh;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-bar {
            background: #8BC34A;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #689F38;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .top-bar .section { display: flex; align-items: center; gap: 20px; }
        .stat-item {
            background: #f1f8e9;
            padding: 5px 15px;
            border-radius: 25px;
            border: 2px solid #7CB342;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ (ØªØ¹Ø±ÙŠØ¨ ÙƒØ§Ù…Ù„) */
        .side-panel {
            width: 220px;
            background: #e0f2f1;
            padding: 15px;
            border-left: 3px solid #b2dfdb;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
        }
        .side-panel h3 { color: #00796b; text-align: center; border-bottom: 2px solid #80cbc4; padding-bottom: 10px; }
        .player-item {
            background: #ffffff;
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 14px;
            border-right: 5px solid #4db6ac;
        }

        /* Ø£Ø±Ø¶ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© */
        .farm-world {
            flex-grow: 1;
            position: relative;
            background-color: #4CAF50;
            background-image: radial-gradient(#81C784 10%, transparent 20%);
            background-size: 50px 50px;
        }

        .animal {
            position: absolute;
            width: 90px;
            transition: all 3s ease-in-out;
            cursor: pointer;
            z-index: 10;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
        .main-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px #e65100;
            font-family: 'Cairo';
        }
        .main-btn:active { transform: translateY(2px); box-shadow: 0 2px #e65100; }

        .collect-btn {
            position: absolute;
            bottom: 30px;
            left: 30px; /* ÙÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù†Ø¶Ø¹Ù‡Ø§ ÙŠØ³Ø§Ø±Ø§Ù‹ Ù„ØªÙ‚Ø§Ø¨Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰ */
            background: #2196F3;
            color: white;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            box-shadow: 0 6px #1976D2;
        }

        /* Ø§Ù„Ù…ØªØ¬Ø± */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            display: flex; align-items: center; justify-content: center; z-index: 2000;
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 20px; text-align: center; width: 400px;
        }
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .shop-card { border: 2px solid #eee; padding: 10px; border-radius: 15px; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen" style="position:fixed; inset:0; background:#2E7D32; display:flex; align-items:center; justify-content:center; z-index:9999;">
    <div style="background:white; padding:40px; border-radius:25px; text-align:center;">
        <h2 style="color:#2E7D32;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø²Ø±Ø¹ØªÙƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h2>
        <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" style="padding:15px; width:250px; border-radius:10px; border:2px solid #ddd; font-family:'Cairo';"><br><br>
        <button onclick="login()" class="main-btn" style="width:100%; font-size:20px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</button>
    </div>
</div>

<div id="game-ui" class="hidden">
    <div class="top-bar">
        <div class="section">
            <div class="stat-item">ğŸ’° Ø°Ù‡Ø¨: <span id="gold-val">0</span></div>
            <div class="stat-item">ğŸ¥š Ø¨ÙŠØ¶: <span id="egg-val">0</span></div>
            <div class="stat-item">ğŸ¯ Ø¹Ø³Ù„: <span id="honey-val">0</span></div>
        </div>
        <div class="section">
            <div class="stat-item">â­ Ù…Ø³ØªÙˆÙ‰: <span id="lvl-val">1</span></div>
            <button onclick="location.reload()" style="background:#f44336; color:white; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer;">X</button>
        </div>
    </div>

    <div style="display:flex; flex-grow:1;">
        <div class="side-panel">
            <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
            <div class="player-item">Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø© <span style="color:#4caf50;">Ù…ØªØµÙ„</span></div>
            <div class="player-item">Ø£Ø­Ù…Ø¯ (Ø¬Ø§Ø±) <span>ğŸ </span></div>
            <div class="player-item">Ø³Ø§Ø±Ø© (Ø¬Ø§Ø±Ø©) <span>ğŸ</span></div>
            <div class="player-item">Ø¹Ù„ÙŠ (Ø¬Ø§Ø±) <span>ğŸ„</span></div>
            <hr>
            <button class="main-btn" style="width:100%;" onclick="showShop()">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</button>
        </div>

        <div class="farm-world" id="farm-area">
            <button class="collect-btn" onclick="collectAll()">Ø¥ÙŠØ¹Ø§Ù† (Ø¬Ù…Ø¹)</button>
        </div>
    </div>
</div>

<div id="shop-modal" class="modal hidden">
    <div class="modal-content">
        <h3>ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
        <div class="shop-grid">
            <div class="shop-card">
                <img src="https://i.ibb.co/4pMym7Q/chicken-walk.gif" width="60"><br>
                <b>Ø¯Ø¬Ø§Ø¬Ø© Ø¨ÙŠØ§Ø¶Ø©</b><br>200ğŸ’°<br>
                <button onclick="buy('chicken', 200)" style="margin-top:5px;">Ø´Ø±Ø§Ø¡</button>
            </div>
            <div class="shop-card">
                <img src="https://i.ibb.co/r76k84M/cow-walk.gif" width="70"><br>
                <b>Ø¨Ù‚Ø±Ø© Ø­Ù„ÙˆØ¨</b><br>500ğŸ’°<br>
                <button onclick="buy('cow', 500)" style="margin-top:5px;">Ø´Ø±Ø§Ø¡</button>
            </div>
        </div>
        <button class="main-btn" onclick="document.getElementById('shop-modal').classList.add('hidden')">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<script>
    let farm = { user: "", gold: 1000, eggs: 0, honey: 0, animals: [] };

    const IMAGES = {
        chicken: 'https://i.ibb.co/4pMym7Q/chicken-walk.gif',
        cow: 'https://i.ibb.co/r76k84M/cow-walk.gif'
    };

    function login() {
        let u = document.getElementById('username').value.trim();
        if(!u) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹");
        let saved = localStorage.getItem('farm_arabic_v14_' + u);
        if(saved) farm = JSON.parse(saved); else farm.user = u;
        
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');
        
        farm.animals.forEach((a, i) => renderAnimal(a, i));
        updateUI();
        setInterval(moveAnimals, 4000);
        setInterval(() => {
            farm.animals.forEach(a => { if(a === 'chicken') farm.eggs++; });
            updateUI();
        }, 8000);
    }

    function renderAnimal(type, id) {
        let img = document.createElement('img');
        img.src = IMAGES[type];
        img.className = 'animal';
        img.id = 'anim-' + id;
        img.style.left = Math.random() * 70 + "%";
        img.style.top = Math.random() * 70 + "%";
        document.getElementById('farm-area').appendChild(img);
    }

    function moveAnimals() {
        let animals = document.getElementsByClassName('animal');
        for(let a of animals) {
            a.style.left = Math.random() * 70 + 10 + "%";
            a.style.top = Math.random() * 70 + 10 + "%";
        }
    }

    function buy(type, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            farm.animals.push(type);
            renderAnimal(type, Date.now());
            updateUI();
            alert("ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­! Ù…Ø¨Ø±ÙˆÙƒ Ø¹Ù„ÙŠÙƒ.");
        } else { alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ."); }
    }

    function collectAll() {
        if(farm.eggs > 0) {
            let gain = farm.eggs * 20;
            farm.gold += gain;
            farm.eggs = 0;
            alert("ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ¶ ÙˆØ±Ø¨Ø­Øª " + gain + " Ø°Ù‡Ø¨Ø©!");
            updateUI();
        } else { alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ¶ Ù„Ø¬Ù…Ø¹Ù‡ Ø§Ù„Ø¢Ù†."); }
    }

    function showShop() { document.getElementById('shop-modal').classList.remove('hidden'); }

    function updateUI() {
        document.getElementById('gold-val').innerText = farm.gold;
        document.getElementById('egg-val').innerText = farm.eggs;
        document.getElementById('honey-val').innerText = farm.honey;
        document.getElementById('lvl-val').innerText = Math.floor(farm.gold / 2000) + 1;
        localStorage.setItem('farm_arabic_v14_' + farm.user, JSON.stringify(farm));
    }
</script>
</body>
</html>
