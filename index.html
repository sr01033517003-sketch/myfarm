<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚Ø© ÙˆØ§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        
        * { box-sizing: border-box; }
        body { 
            background: #2e7d32; 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column;
            color: white;
            overflow: hidden;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .header-bar {
            height: 70px;
            background: #1b5e20;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-bottom: 4px solid #ffd700;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .header-bar div { background: rgba(0,0,0,0.2); padding: 8px 20px; border-radius: 10px; border: 1px solid #ffd700; font-size: 15px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ø«Ù„Ø§Ø«Ø© Ø£Ø¹Ù…Ø¯Ø©) */
        .main-game-area {
            flex: 1;
            display: grid;
            grid-template-columns: 300px 1fr 300px; /* ÙŠÙ…ÙŠÙ† ÙˆÙŠØ³Ø§Ø± Ø«Ø§Ø¨Øª ÙˆØ§Ù„ÙˆØ³Ø· Ù…Ø±Ù† */
            gap: 15px;
            padding: 15px;
        }

        /* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª (Ø¸Ø§Ù‡Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹) */
        .right-panel {
            background: #B2DFDB;
            border-radius: 20px;
            padding: 15px;
            color: #004D40;
            display: flex;
            flex-direction: column;
            gap: 10px;
            border: 4px solid #00897B;
            overflow-y: auto;
        }

        /* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆØ³Ø·: Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª */
        .center-panel {
            background: #4caf50;
            border-radius: 20px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }

        /* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙˆØ§Ù„Ø£Ø´Ø¬Ø§Ø± */
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª Ø¨Ø§Ù„Ù…ØªØ¬Ø± */
        .shop-card {
            background: white;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            border-bottom: 3px solid #ef6c00;
        }
        .shop-card button {
            width: 100%; padding: 8px; background: #ef6c00; border: none; color: white;
            border-radius: 5px; cursor: pointer; font-family: 'Cairo'; font-weight: bold; margin-top: 5px;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø¶Ø®Ù…Ø© */
        .farm-grid {
            display: grid;
            grid-template-columns: repeat(5, 100px);
            gap: 10px;
            background: #5d4037;
            padding: 20px;
            border-radius: 20px;
            border: 8px solid #3e2723;
        }
        .land {
            width: 100px; height: 100px; background: #6d4c41; border: 1px solid #3e2723;
            border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 40px; position: relative;
        }
        .timer-overlay { position: absolute; bottom: 0; width: 100%; background: black; color: #0f0; font-size: 11px; text-align: center; }

        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø«Ø§Ø¨Øª */
        .chat-container {
            flex: 1; background: #e0f2f1; border-radius: 20px; padding: 10px;
            display: flex; flex-direction: column; border: 4px solid #00897B;
        }
        .chat-msgs { flex: 1; background: white; border-radius: 10px; padding: 10px; overflow-y: auto; color: #333; font-size: 13px; margin-bottom: 5px; }
        .chat-input-row { display: flex; gap: 5px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª */
        .animal-yard { width: 100%; height: 200px; background: rgba(255,255,255,0.1); border: 3px dashed white; border-radius: 20px; position: relative; margin-bottom: 10px; }
        .chicken { position: absolute; width: 60px; transition: all 3s linear; }

        .sell-button { background: #1565C0; color: white; padding: 20px; width: 100%; border-radius: 15px; border: none; font-size: 20px; font-weight: bold; cursor: pointer; margin-top: 10px; }

        #login-overlay { position: fixed; inset: 0; background: #1b5e20; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-overlay">
    <div style="background:white; padding:40px; border-radius:20px; text-align:center; color:#333;">
        <h1>ğŸšœ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
        <input type="text" id="p-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø§Ø±Ø¹" style="padding:15px; font-family:'Cairo'; font-size:18px;"><br><br>
        <button onclick="startGame()" style="padding:15px 50px; background:#2e7d32; color:white; border:none; border-radius:10px; cursor:pointer; font-size:20px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div class="header-bar">
    <div>ğŸ’° Ø§Ù„Ø°Ù‡Ø¨: <span id="gold">1000</span></div>
    <div>ğŸ¥š Ø§Ù„Ø¨ÙŠØ¶: <span id="eggs">0</span></div>
    <div>ğŸ Ø§Ù„ØªÙØ§Ø­: <span id="apples">0</span></div>
    <div>ğŸŒ¾ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„: <span id="crops">0</span></div>
    <div>ğŸšœ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª: <span id="tools">0</span></div>
</div>

<div class="main-game-area">
    <div class="right-panel">
        <h3 style="text-align:center; margin:0;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ÙØªÙˆØ­</h3>
        <div class="shop-card">
            <span>ğŸŒ± Ø¨Ø°ÙˆØ± Ø¨Ø±Ø³ÙŠÙ…</span>
            <button onclick="buy('seeds', 50)">Ø´Ø±Ø§Ø¡ (50ğŸ’°)</button>
        </div>
        <div class="shop-card">
            <span>ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© Ø¨ÙŠØ§Ø¶Ø©</span>
            <button onclick="buy('chicken', 200)">Ø´Ø±Ø§Ø¡ (200ğŸ’°)</button>
        </div>
        <div class="shop-card">
            <span>ğŸ Ø´Ø¬Ø±Ø© ØªÙØ§Ø­</span>
            <button onclick="buy('tree', 500)">Ø´Ø±Ø§Ø¡ (500ğŸ’°)</button>
        </div>
        <div class="shop-card">
            <span>ğŸšœ Ù…Ø­Ø±Ø§Ø« Ø¢Ù„ÙŠ</span>
            <button onclick="buy('tool', 1000)">Ø´Ø±Ø§Ø¡ (1000ğŸ’°)</button>
        </div>
    </div>

    <div class="center-panel">
        <div class="animal-yard" id="yard">
            <h4 style="margin:5px;">ğŸ¥ Ø³Ø§Ø­Ø© Ø§Ù„Ø·ÙŠÙˆØ±</h4>
        </div>
        <h3 style="margin:5px;">ğŸŒ¾ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚)</h3>
        <div class="farm-grid" id="grid"></div>
        <button class="sell-button" onclick="sellAll()">ğŸ’° Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙÙˆØ±Ø§Ù‹)</button>
    </div>

    <div class="left-panel">
        <div class="chat-container">
            <h3 style="margin:0 0 5px 0; color:#004D40;">ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h3>
            <div class="chat-msgs" id="chat-box"><b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! ÙƒÙ„ Ø´ÙŠØ¡ Ø¸Ø§Ù‡Ø± Ø£Ù…Ø§Ù…Ùƒ Ø§Ù„Ø¢Ù†.</div>
            <div class="chat-input-row">
                <input type="text" id="chat-in" style="flex:1; padding:5px; border-radius:5px; border:1px solid #ccc;">
                <button onclick="send()" style="background:#00897B; color:white; border:none; padding:5px 10px; border-radius:5px;">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
        <div style="background:#8BC34A; padding:15px; border-radius:20px; color:#1b5e20; border:4px solid #689F38;">
            <h3 style="margin:0;">ğŸŒ³ Ø§Ù„Ø£Ø´Ø¬Ø§Ø± Ø§Ù„Ù…Ø«Ù…Ø±Ø©</h3>
            <div id="trees-area" style="font-size:30px; display:flex; gap:5px; flex-wrap:wrap;"></div>
        </div>
    </div>
</div>

<script>
    let farm = { gold: 1000, eggs: 0, seeds: 5, crops: 0, apples: 0, chickens: 0, tools: 0, trees: 0 };
    const CHICKEN_URL = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function startGame() {
        if(!document.getElementById('p-name').value) return;
        document.getElementById('login-overlay').classList.add('hidden');
        initGrid();
        setInterval(moveAnimals, 3000);
        setInterval(() => {
            if(farm.chickens > 0) farm.eggs += farm.chickens;
            if(farm.trees > 0) farm.apples += farm.trees;
            updateUI();
        }, 10000);
    }

    function initGrid() {
        const grid = document.getElementById('grid');
        for(let i=0; i<15; i++) {
            let l = document.createElement('div');
            l.className = 'land';
            l.onclick = () => plant(l);
            grid.appendChild(l);
        }
    }

    function plant(l) {
        if(l.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--; l.innerHTML = "ğŸŒ±";
            let time = 180;
            let t = document.createElement('div'); t.className = 'timer-overlay'; l.appendChild(t);
            updateUI();
            let count = setInterval(() => {
                time--;
                t.innerText = `${Math.floor(time/60)}:${time%60 < 10 ? '0'+time%60 : time%60}`;
                if(time <= 0) {
                    clearInterval(count); l.innerHTML = "ğŸŒ¾";
                    l.onclick = () => { farm.crops++; l.innerHTML = ""; l.onclick = () => plant(l); updateUI(); };
                }
            }, 1000);
        } else if(farm.seeds <= 0 && l.innerHTML === "") alert("Ø§Ø´ØªØ±Ù Ø¨Ø°ÙˆØ± Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ†!");
    }

    function buy(item, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            if(item === 'seeds') farm.seeds += 5;
            if(item === 'chicken') {
                farm.chickens++;
                let img = document.createElement('img');
                img.src = CHICKEN_URL; img.className = 'chicken';
                img.style.left = "50%"; img.style.top = "50%";
                document.getElementById('yard').appendChild(img);
            }
            if(item === 'tree') { farm.trees++; document.getElementById('trees-area').innerHTML += "ğŸŒ³"; }
            if(item === 'tool') farm.tools++;
            updateUI();
            addChat("Ø§Ù„Ù†Ø¸Ø§Ù…", `ØªÙ… Ø´Ø±Ø§Ø¡ ${item} Ø¨Ù†Ø¬Ø§Ø­!`);
        } else alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!");
    }

    function moveAnimals() {
        let cs = document.getElementsByClassName('chicken');
        for(let c of cs) { c.style.left = Math.random()*80+"%"; c.style.top = Math.random()*60+"%"; }
    }

    function sellAll() {
        let total = (farm.eggs * 20) + (farm.crops * 60) + (farm.apples * 100);
        if(total > 0) {
            farm.gold += total; farm.eggs = 0; farm.crops = 0; farm.apples = 0;
            updateUI();
            addChat("Ø£Ù†Øª", `Ø¨Ø¹Øª ÙƒÙ„ Ø´ÙŠØ¡ ÙˆØ±Ø¨Ø­Øª ${total} Ø°Ù‡Ø¨Ø©!`);
        }
    }

    function send() {
        let i = document.getElementById('chat-in');
        if(i.value) { addChat("Ø£Ù†Øª", i.value); i.value = ""; }
    }

    function addChat(user, text) {
        let b = document.getElementById('chat-box');
        b.innerHTML += `<div><b>${user}:</b> ${text}</div>`;
        b.scrollTop = b.scrollHeight;
    }

    function updateUI() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('eggs').innerText = farm.eggs;
        document.getElementById('crops').innerText = farm.crops;
        document.getElementById('apples').innerText = farm.apples;
        document.getElementById('tools').innerText = farm.tools;
    }
</script>
</body>
    </html>
