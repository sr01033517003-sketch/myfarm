<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø© V16</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap');
        body { background: #4CAF50; font-family: 'Cairo', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-bar { background: #8BC34A; padding: 10px; display: flex; justify-content: space-around; border-bottom: 5px solid #689F38; color: #fff; text-shadow: 1px 1px 2px #000; }
        .stat { background: rgba(0,0,0,0.2); padding: 5px 20px; border-radius: 20px; border: 1px solid #fff; font-size: 14px; }

        .game-layout { display: flex; flex: 1; overflow: hidden; }

        /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©: Ø¯Ø±Ø¯Ø´Ø© + Ù…ØªØ¬Ø± Ø³Ø±ÙŠØ¹ */
        .side-panel { width: 250px; background: #B2DFDB; border-left: 4px solid #80CBC4; display: flex; flex-direction: column; padding: 10px; z-index: 100; }
        .chat-area { flex: 1; background: white; border-radius: 10px; margin-bottom: 10px; padding: 10px; overflow-y: auto; font-size: 13px; color: #333; }
        .chat-input { display: flex; gap: 5px; }
        
        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© ÙˆØ§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª */
        .farm-main { flex: 1; position: relative; background: #4CAF50; display: flex; flex-direction: column; align-items: center; overflow-y: auto; padding: 20px; }
        .animal-yard { width: 90%; height: 250px; background: rgba(255,255,255,0.1); border: 3px dashed #fff; border-radius: 30px; position: relative; margin-top: 20px; }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© */
        .crop-grid { display: grid; grid-template-columns: repeat(4, 80px); gap: 10px; background: #5d4037; padding: 15px; border-radius: 20px; border: 5px solid #3e2723; margin-top: 20px; }
        .plot { width: 80px; height: 80px; background: #6d4c41; border: 2px solid #3d1c02; border-radius: 10px; cursor: pointer; position: relative; display: flex; align-items: center; justify-content: center; font-size: 30px; }
        .timer { position: absolute; bottom: 0; width: 100%; background: rgba(0,0,0,0.8); color: #00ff00; font-size: 11px; text-align: center; }

        /* Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .moving-chicken { position: absolute; width: 80px; transition: all 3s linear; filter: drop-shadow(2px 2px 2px #000); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± */
        .btn-action { background: #FF9800; color: white; border: none; padding: 10px; border-radius: 10px; cursor: pointer; font-family: 'Cairo'; font-weight: bold; margin-bottom: 5px; }
        .btn-collect { position: fixed; bottom: 20px; left: 270px; background: #2196F3; color: white; padding: 15px 40px; border-radius: 50px; font-size: 20px; font-weight: bold; border: none; cursor: pointer; box-shadow: 0 5px #1976D2; }

        #login { position: fixed; inset: 0; background: #2E7D32; display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login">
    <div style="background:white; padding:40px; border-radius:20px; text-align:center;">
        <h2 style="color:#2E7D32">ğŸšœ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰</h2>
        <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" style="padding:10px; font-family:'Cairo';"><br><br>
        <button onclick="startGame()" style="padding:10px 40px; background:#8BC34A; border:none; border-radius:10px; color:white; font-weight:bold; cursor:pointer;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>
</div>

<div id="game-ui" class="hidden" style="display:contents;">
    <div class="top-bar">
        <div class="stat">ğŸ’° Ø°Ù‡Ø¨: <span id="gold">1000</span></div>
        <div class="stat">ğŸ¥š Ø¨ÙŠØ¶: <span id="eggs">0</span></div>
        <div class="stat">ğŸŒ¾ Ù…Ø­Ø§ØµÙŠÙ„: <span id="crops">0</span></div>
        <div class="stat">â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="lvl">1</span></div>
    </div>

    <div class="game-layout">
        <div class="side-panel">
            <h4 style="margin:5px 0; color:#004D40;">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h4>
            <div class="chat-area" id="chat">
                <div>Ø§Ù„Ù†Ø¸Ø§Ù…: Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©!</div>
            </div>
            <div class="chat-input">
                <input type="text" id="chat-msg" style="flex:1; border-radius:5px; border:1px solid #ccc;">
                <button onclick="sendChat()">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
            <hr style="width:100%;">
            <h4 style="margin:5px 0; color:#004D40;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø³Ø±ÙŠØ¹</h4>
            <button class="btn-action" onclick="buyItem('seeds', 50)">ğŸŒ± Ø¨Ø°ÙˆØ± Ø¨Ø±Ø³ÙŠÙ… (50ğŸ’°)</button>
            <button class="btn-action" onclick="buyItem('chicken', 200)">ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© (200ğŸ’°)</button>
            <button class="btn-action" onclick="buyItem('tractor', 1000)">ğŸšœ Ø¬Ø±Ø§Ø± Ø¢Ù„ÙŠ (1000ğŸ’°)</button>
        </div>

        <div class="farm-main">
            <h3 style="color:white; margin:0;">ğŸšœ Ø³Ø§Ø­Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª ÙˆØ§Ù„Ø·ÙŠÙˆØ±</h3>
            <div class="animal-yard" id="yard"></div>

            <h3 style="color:white; margin:20px 0 0 0;">ğŸŒ± Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚)</h3>
            <div class="crop-grid" id="grid"></div>

            <button class="btn-collect" onclick="sellEverything()">Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ù…Ø­ØµÙˆÙ„)</button>
        </div>
    </div>
</div>

<script>
    let farm = { gold: 1000, eggs: 0, crops: 0, seeds: 5, chickens: 0 };
    const CHICKEN_IMG = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function startGame() {
        if(!document.getElementById('username').value) return;
        document.getElementById('login').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');
        initGrid();
        setInterval(moveAnimals, 3000);
        setInterval(() => { if(farm.chickens > 0) farm.eggs += farm.chickens; updateUI(); }, 10000);
    }

    function initGrid() {
        const g = document.getElementById('grid');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            g.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--;
            p.innerHTML = "ğŸŒ±";
            let time = 180;
            let t = document.createElement('div');
            t.className = 'timer';
            p.appendChild(t);
            updateUI();

            let count = setInterval(() => {
                time--;
                let m = Math.floor(time/60), s = time%60;
                t.innerText = `${m}:${s<10?'0'+s:s}`;
                if(time <= 0) {
                    clearInterval(count);
                    p.innerHTML = "ğŸŒ¾";
                    p.onclick = () => { farm.crops++; p.innerHTML = ""; p.onclick = () => plant(p); updateUI(); };
                }
            }, 1000);
        } else if(farm.seeds <= 0) {
            alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ø¨Ø°ÙˆØ±! Ø§Ø´ØªØ±Ù Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±.");
        }
    }

    function buyItem(item, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            if(item === 'seeds') farm.seeds += 5;
            if(item === 'chicken') {
                farm.chickens++;
                let img = document.createElement('img');
                img.src = CHICKEN_IMG;
                img.className = 'moving-chicken';
                img.style.left = "50%"; img.style.top = "50%";
                document.getElementById('yard').appendChild(img);
            }
            if(item === 'tractor') alert("ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¬Ø±Ø§Ø±! (Ø³ÙŠØ²ÙŠØ¯ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ù‚Ø±ÙŠØ¨Ø§Ù‹)");
            updateUI();
            addChat(`Ø§Ù„Ù†Ø¸Ø§Ù…: Ù…Ø¨Ø±ÙˆÙƒ Ø´Ø±Ø§Ø¡ ${item}!`);
        } else { alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!"); }
    }

    function moveAnimals() {
        let chickens = document.getElementsByClassName('moving-chicken');
        for(let c of chickens) {
            c.style.left = Math.random() * 80 + "%";
            c.style.top = Math.random() * 60 + "%";
        }
    }

    function sellEverything() {
        let total = (farm.eggs * 20) + (farm.crops * 60);
        if(total > 0) {
            farm.gold += total;
            farm.eggs = 0; farm.crops = 0;
            updateUI();
            addChat(`Ø£Ù†Øª: Ø¨Ø¹Øª Ø§Ù„Ù…Ø­ØµÙˆÙ„ ÙˆØ±Ø¨Ø­Øª ${total} Ø°Ù‡Ø¨Ø©`);
        }
    }

    function sendChat() {
        let msg = document.getElementById('chat-msg').value;
        if(msg) { addChat(`Ø£Ù†Øª: ${msg}`); document.getElementById('chat-msg').value = ""; }
    }

    function addChat(text) {
        let c = document.getElementById('chat');
        c.innerHTML += `<div>${text}</div>`;
        c.scrollTop = c.scrollHeight;
    }

    function updateUI() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('eggs').innerText = farm.eggs;
        document.getElementById('crops').innerText = farm.crops;
        document.getElementById('lvl').innerText = Math.floor(farm.gold / 2000) + 1;
    }
</script>
</body>
</html>
