<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚Ø©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        
        * { box-sizing: border-box; }
        body { 
            background: #2e7d32; 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            color: #fff;
            overflow: hidden; /* Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ */
        }

        /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ø¹Ø±ÙŠØ¶ Ø¬Ø¯Ø§Ù‹ */
        .top-stats-header { 
            background: #1b5e20; 
            height: 90px; 
            display: flex; 
            justify-content: space-evenly; 
            align-items: center; 
            border-bottom: 5px solid #ffd700;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            z-index: 1000;
            padding: 0 20px;
        }
        .stat-card { 
            background: rgba(255,255,255,0.1); 
            padding: 12px 25px; 
            border-radius: 15px; 
            border: 2px solid #ffd700; 
            font-size: 16px; 
            font-weight: 900;
            min-width: 140px;
            text-align: center;
        }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ØªÙ…ØªØ¯ Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
        .world-container { 
            flex: 1; 
            display: flex; 
            padding: 10px;
            gap: 15px;
            background: #4caf50;
            height: calc(100vh - 240px); /* Ù…ÙˆØ§Ø²Ù†Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ */
        }

        /* Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ± */
        .mega-shop { 
            width: 300px; 
            background: #B2DFDB; 
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            border: 5px solid #00897B;
            color: #004D40;
            overflow-y: auto;
        }
        .shop-item {
            background: #fff;
            padding: 10px;
            border-radius: 12px;
            border-bottom: 4px solid #00897B;
        }
        .shop-btn { 
            width: 100%; padding: 10px; border: none; 
            background: #ef6c00; color: white; border-radius: 8px; 
            font-weight: bold; cursor: pointer; font-family: 'Cairo';
            font-size: 14px; margin-top: 5px;
        }
        .shop-btn:hover { background: #e65100; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ© - ÙˆØ§Ø³Ø¹Ø© Ø¬Ø¯Ø§Ù‹ */
        .farm-main-zone { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            gap: 20px;
            padding: 10px;
            overflow-y: auto;
        }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        .animal-safari { 
            width: 100%; 
            height: 300px; 
            background: rgba(255,255,255,0.15); 
            border: 4px dashed #fff; 
            border-radius: 40px; 
            position: relative;
            overflow: hidden;
        }
        .moving-entity { position: absolute; width: 70px; transition: all 3.5s linear; }

        /* Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø¶Ø®Ù… */
        .field-grid { 
            display: grid; 
            grid-template-columns: repeat(6, 110px); /* 6 Ø£Ø¹Ù…Ø¯Ø© Ù„Ù…Ø³Ø§Ø­Ø© Ø£ÙƒØ¨Ø± */
            gap: 15px; 
            background: #5d4037; 
            padding: 25px; 
            border-radius: 30px; 
            border: 10px solid #3e2723;
            width: fit-content;
            margin: 0 auto;
        }
        .soil { 
            width: 110px; height: 110px; background: #6d4c41; 
            border-radius: 15px; cursor: pointer; position: relative; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 40px; border: 2px solid #3e2723;
        }
        .timer-tag { position: absolute; bottom: 0; width: 100%; background: #000; color: #0f0; font-size: 12px; text-align: center; border-radius: 0 0 13px 13px; }

        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø¹Ø±Ø¶ */
        .mega-chat-bar { 
            height: 150px; 
            background: #e0f2f1; 
            border-top: 5px solid #00897B; 
            display: flex; 
            padding: 15px; 
            gap: 20px;
        }
        .chat-view { 
            flex: 1; background: white; border-radius: 15px; 
            padding: 15px; overflow-y: auto; color: #333; 
            border: 2px solid #ccc;
        }
        .chat-inputs { width: 300px; display: flex; flex-direction: column; gap: 10px; }
        .chat-inputs input { padding: 12px; border-radius: 10px; border: 1px solid #ccc; font-family: 'Cairo'; }

        .big-sell-btn { 
            background: #1565C0; color: white; padding: 20px 60px; 
            border-radius: 50px; border: none; font-size: 24px; 
            font-weight: 900; cursor: pointer; box-shadow: 0 8px #0D47A1;
            margin: 10px auto; display: block;
        }

        #overlay { position: fixed; inset: 0; background: #1b5e20; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="overlay">
    <div style="background:white; padding:50px; border-radius:30px; text-align:center; width: 450px;">
        <h1 style="color:#2e7d32;">ğŸšœ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙƒØ¨Ø±Ù‰</h1>
        <p style="color:#666;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø²Ø±Ø§Ø¹Ø© ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬</p>
        <input type="text" id="p-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" style="padding:15px; width:100%; font-family:'Cairo'; border:2px solid #2e7d32; border-radius:12px; font-size:20px; text-align:center;"><br><br>
        <button onclick="start()" class="shop-btn" style="height:60px; font-size:22px;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</button>
    </div>
</div>

<div class="top-stats-header">
    <div class="stat-card">ğŸ’° Ø§Ù„Ø°Ù‡Ø¨: <span id="gold">1000</span></div>
    <div class="stat-card">ğŸ¥š Ø§Ù„Ø¨ÙŠØ¶: <span id="eggs">0</span></div>
    <div class="stat-card">ğŸ¥› Ø§Ù„Ø­Ù„ÙŠØ¨: <span id="milk">0</span></div>
    <div class="stat-card">ğŸŒ± Ø§Ù„Ø¨Ø°ÙˆØ±: <span id="seeds">5</span></div>
    <div class="stat-card">ğŸŒ¾ Ø§Ù„Ù…Ø®Ø²Ù†: <span id="crops">0</span></div>
</div>

<div class="world-container">
    <div class="mega-shop">
        <h3 style="text-align:center; margin:0;">ğŸ›’ Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø¯ÙˆØ§Øª</h3>
        
        <div class="shop-item">
            <span>ğŸŒ± Ø¨Ø°ÙˆØ± Ø¨Ø±Ø³ÙŠÙ… (5)</span>
            <button class="shop-btn" onclick="buy('seeds', 50)">Ø´Ø±Ø§Ø¡ Ø¨Ù€ 50ğŸ’°</button>
        </div>
        
        <div class="shop-item">
            <span>ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© Ø¨ÙŠØ§Ø¶Ø©</span>
            <button class="shop-btn" onclick="buy('chicken', 200)">Ø´Ø±Ø§Ø¡ Ø¨Ù€ 200ğŸ’°</button>
        </div>

        <div class="shop-item">
            <span>ğŸ„ Ø¨Ù‚Ø±Ø© Ø­Ù„ÙˆØ¨</span>
            <button class="shop-btn" onclick="buy('cow', 800)">Ø´Ø±Ø§Ø¡ Ø¨Ù€ 800ğŸ’°</button>
        </div>

        <div class="shop-item">
            <span>ğŸšœ Ø¬Ø±Ø§Ø± Ø¢Ù„ÙŠ</span>
            <button class="shop-btn" onclick="buy('tractor', 2000)">Ø´Ø±Ø§Ø¡ Ø¨Ù€ 2000ğŸ’°</button>
        </div>
    </div>

    <div class="farm-main-zone">
        <div class="animal-safari" id="safari">
            <h4 style="margin:10px; color:white;">ğŸ„ Ø³Ø§Ø­Ø© Ø§Ù„Ù…ÙˆØ§Ø´ÙŠ ÙˆØ§Ù„Ø·ÙŠÙˆØ±</h4>
        </div>

        <div class="field-grid" id="grid">
            </div>

        <button class="big-sell-btn" onclick="sellAll()">ğŸ’° Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª)</button>
    </div>
</div>

<div class="mega-chat-bar">
    <div class="chat-view" id="logs">
        <div><b>Ø§Ù„Ù†Ø¸Ø§Ù…:</b> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ù‚Ù… Ø¨Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø°ÙˆØ± ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø²Ø±Ø§Ø¹Ø©.</div>
    </div>
    <div class="chat-inputs">
        <input type="text" id="chat-in" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø²Ø§Ø±Ø¹ÙŠÙ†...">
        <button onclick="sendChat()" class="shop-btn" style="background:#00897B; margin:0;">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
</div>

<script>
    let farm = { gold: 1000, eggs: 0, milk: 0, seeds: 5, crops: 0, chickens: 0, cows: 0 };
    
    function start() {
        if(!document.getElementById('p-name').value) return;
        document.getElementById('overlay').classList.add('hidden');
        initGrid();
        setInterval(moveAnimals, 3000);
        // Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
        setInterval(() => {
            if(farm.chickens > 0) farm.eggs += farm.chickens;
            if(farm.cows > 0) farm.milk += farm.cows;
            updateUI();
        }, 10000);
    }

    function initGrid() {
        const grid = document.getElementById('grid');
        for(let i=0; i<18; i++) {
            let s = document.createElement('div');
            s.className = 'soil';
            s.onclick = () => plant(s);
            grid.appendChild(s);
        }
    }

    function plant(s) {
        if(s.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--; s.innerHTML = "ğŸŒ±";
            let time = 180; // 3 Ø¯Ù‚Ø§Ø¦Ù‚
            let t = document.createElement('div'); t.className = 'timer-tag'; s.appendChild(t);
            updateUI();
            let count = setInterval(() => {
                time--;
                t.innerText = `${Math.floor(time/60)}:${time%60 < 10 ? '0'+time%60 : time%60}`;
                if(time <= 0) {
                    clearInterval(count); s.innerHTML = "ğŸŒ¾";
                    s.onclick = () => { 
                        farm.crops++; s.innerHTML = ""; s.onclick = () => plant(s); updateUI();
                        log("Ø£Ù†Øª", "Ø­ØµØ¯Øª Ù…Ø­ØµÙˆÙ„Ø§Ù‹ Ø·Ø§Ø²Ø¬Ø§Ù‹!");
                    };
                }
            }, 1000);
        } else if(farm.seeds <= 0) alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø°ÙˆØ±! Ø§Ø´ØªØ±ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±.");
    }

    function buy(item, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            if(item === 'seeds') farm.seeds += 5;
            if(item === 'chicken') { farm.chickens++; addAnimal('https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg'); }
            if(item === 'cow') { farm.cows++; addAnimal('https://i.ibb.co/r76k84M/cow-walk.gif'); }
            if(item === 'tractor') log("Ø§Ù„Ù†Ø¸Ø§Ù…", "Ø§Ø´ØªØ±ÙŠØª Ø¬Ø±Ø§Ø±Ø§Ù‹! Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø£ØµØ¨Ø­ Ø£Ø³Ø±Ø¹ Ø°Ù‡Ù†ÙŠØ§Ù‹.");
            updateUI();
            log("Ø§Ù„Ù…ØªØ¬Ø±", `ØªÙ… Ø´Ø±Ø§Ø¡ ${item} Ø¨Ù†Ø¬Ø§Ø­.`);
        } else alert("Ø§Ù„Ø°Ù‡Ø¨ ØºÙŠØ± ÙƒØ§ÙÙ!");
    }

    function addAnimal(url) {
        let img = document.createElement('img');
        img.src = url; img.className = 'moving-entity';
        img.style.left = "50%"; img.style.top = "50%";
        document.getElementById('safari').appendChild(img);
    }

    function moveAnimals() {
        let items = document.getElementsByClassName('moving-entity');
        for(let i of items) {
            i.style.left = Math.random() * 90 + "%";
            i.style.top = Math.random() * 70 + "%";
        }
    }

    function sellAll() {
        let total = (farm.eggs * 20) + (farm.milk * 50) + (farm.crops * 70);
        if(total > 0) {
            farm.gold += total; farm.eggs = 0; farm.milk = 0; farm.crops = 0;
            updateUI(); log("Ø£Ù†Øª", `Ø¨Ø¹Øª ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ù‚Ø§Ø¨Ù„ ${total} Ø°Ù‡Ø¨Ø©!`);
            alert("ØªÙ… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­! ğŸ’°");
        } else alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠØ¡ Ù„Ø¨ÙŠØ¹Ù‡!");
    }

    function sendChat() {
        let i = document.getElementById('chat-in');
        if(i.value) { log("Ø£Ù†Øª", i.value); i.value = ""; }
    }

    function log(user, text) {
        let l = document.getElementById('logs');
        l.innerHTML += `<div><b>${user}:</b> ${text}</div>`;
        l.scrollTop = l.scrollHeight;
    }

    function updateUI() {
        document.getElementById('gold').innerText = farm.gold;
        document.getElementById('eggs').innerText = farm.eggs;
        document.getElementById('milk').innerText = farm.milk;
        document.getElementById('seeds').innerText = farm.seeds;
        document.getElementById('crops').innerText = farm.crops;
    }
</script>
</body>
</html>
