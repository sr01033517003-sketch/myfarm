<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†Ø©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap');
        
        * { box-sizing: border-box; }
        body { 
            background: #2e7d32; 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            color: white;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ - Ø«Ø§Ø¨Øª ÙˆÙˆØ§Ø¶Ø­ */
        .top-bar { 
            background: #1b5e20; 
            height: 60px; 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            border-bottom: 4px solid #ffd700;
        }
        .stat-box { background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 10px; font-size: 14px; border: 1px solid #ffd700; }

        .main-layout { display: flex; flex: 1; overflow: hidden; }

        /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø¯Ø±Ø¯Ø´Ø© ÙˆÙ…ØªØ¬Ø±) */
        .side-panel { 
            width: 250px; 
            background: #e0f2f1; 
            color: #004d40; 
            display: flex; 
            flex-direction: column; 
            padding: 10px; 
            border-left: 5px solid #009688;
        }
        .chat-box { flex: 1; background: white; border-radius: 10px; padding: 10px; overflow-y: auto; margin-bottom: 10px; border: 1px solid #ccc; font-size: 12px; }
        .store-section { background: #b2dfdb; padding: 10px; border-radius: 10px; }
        .buy-btn { width: 100%; padding: 8px; margin: 5px 0; cursor: pointer; background: #ff9800; border: none; color: white; border-radius: 5px; font-family: 'Cairo'; }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨ */
        .farm-world { 
            flex: 1; 
            background: #4caf50; 
            position: relative; 
            padding: 20px; 
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·ÙŠÙˆØ± (Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©) */
        .birds-area { 
            width: 100%; 
            height: 200px; 
            background: rgba(255,255,255,0.2); 
            border: 3px dashed white; 
            border-radius: 20px; 
            position: relative; 
            margin-bottom: 20px;
        }
        .real-chicken { 
            position: absolute; 
            width: 80px; 
            height: 80px; 
            transition: all 3s linear; 
            z-index: 10;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚) */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(4, 70px); 
            gap: 10px; 
            background: #5d4037; 
            padding: 15px; 
            border-radius: 15px;
        }
        .plot { 
            width: 70px; height: 70px; background: #3e2723; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; 
            cursor: pointer; position: relative; font-size: 30px; 
        }
        .time-label { position: absolute; bottom: 0; width: 100%; background: black; color: #0f0; font-size: 10px; text-align: center; }

        /* Ø²Ø± Ø¥ÙŠØ¹Ø§Ù† */
        .collect-btn { 
            position: fixed; bottom: 20px; right: 20px; 
            background: #2196f3; color: white; padding: 15px 40px; 
            border-radius: 50px; border: none; font-size: 20px; 
            cursor: pointer; box-shadow: 0 5px #1565c0; font-family: 'Cairo';
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-overlay" style="position:fixed; inset:0; background:#1b5e20; z-index:1000; display:flex; align-items:center; justify-content:center;">
    <div style="background:white; padding:40px; border-radius:20px; text-align:center; color:black;">
        <h2>ğŸŒ¾ Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</h2>
        <input type="text" id="p-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:10px; width:200px; font-family:'Cairo';"><br><br>
        <button onclick="startGame()" style="padding:10px 40px; background:#4caf50; border:none; color:white; border-radius:10px; cursor:pointer;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div class="top-bar">
    <div class="stat-box">ğŸ’° Ø°Ù‡Ø¨: <span id="g-count">1000</span></div>
    <div class="stat-box">ğŸ¥š Ø¨ÙŠØ¶: <span id="e-count">0</span></div>
    <div class="stat-box">ğŸŒ¾ Ø¨Ø°ÙˆØ±: <span id="s-count">5</span></div>
</div>

<div class="main-layout">
    <div class="side-panel">
        <h4 style="margin:0">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</h4>
        <div class="chat-box" id="msg-box">Ø§Ù„Ù†Ø¸Ø§Ù…: Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ!</div>
        
        <div class="store-section">
            <h4 style="margin:0">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h4>
            <button class="buy-btn" onclick="shop('chicken', 200)">ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© (200)</button>
            <button class="buy-btn" onclick="shop('seed', 50)">ğŸŒ± Ø¨Ø°ÙˆØ± (50)</button>
        </div>
    </div>

    <div class="farm-world">
        <h3>Ø³Ø§Ø­Ø© Ø§Ù„Ø¯Ø¬Ø§Ø¬</h3>
        <div class="birds-area" id="pen"></div>

        <h3>Ø­Ù‚Ù„ Ø§Ù„Ø²Ø±Ø§Ø¹Ø© (3 Ø¯Ù‚Ø§Ø¦Ù‚)</h3>
        <div class="grid" id="farm-grid"></div>
    </div>
</div>

<button class="collect-btn" onclick="sell()">Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ Ø§Ù„ÙƒÙ„)</button>

<script>
    let data = { gold: 1000, eggs: 0, seeds: 5, chickens: 0, crops: 0 };
    // ØµÙˆØ±Ø© Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©
    const CHICKEN_URL = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function startGame() {
        if(!document.getElementById('p-name').value) return;
        document.getElementById('login-overlay').classList.add('hidden');
        initGrid();
        setInterval(move, 3000);
        setInterval(() => { if(data.chickens > 0) { data.eggs += data.chickens; update(); } }, 10000);
    }

    function initGrid() {
        const g = document.getElementById('farm-grid');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            g.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerHTML === "" && data.seeds > 0) {
            data.seeds--;
            p.innerHTML = "ğŸŒ±";
            let time = 180;
            let lbl = document.createElement('div');
            lbl.className = 'time-label';
            p.appendChild(lbl);
            update();

            let timer = setInterval(() => {
                time--;
                let m = Math.floor(time/60), s = time%60;
                lbl.innerText = `${m}:${s<10?'0'+s:s}`;
                if(time <= 0) {
                    clearInterval(timer);
                    p.innerHTML = "ğŸŒ¾";
                    p.onclick = () => { data.crops++; p.innerHTML = ""; p.onclick = () => plant(p); update(); };
                }
            }, 1000);
        }
    }

    function shop(type, price) {
        if(data.gold >= price) {
            data.gold -= price;
            if(type === 'chicken') {
                data.chickens++;
                let img = document.createElement('img');
                img.src = CHICKEN_URL;
                img.className = 'real-chicken';
                img.style.left = "50%"; img.style.top = "50%";
                document.getElementById('pen').appendChild(img);
            } else { data.seeds += 5; }
            update();
        } else { alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!"); }
    }

    function move() {
        let cs = document.getElementsByClassName('real-chicken');
        for(let c of cs) {
            c.style.left = Math.random() * 80 + "%";
            c.style.top = Math.random() * 60 + "%";
        }
    }

    function sell() {
        let total = (data.eggs * 20) + (data.crops * 60);
        if(total > 0) {
            data.gold += total; data.eggs = 0; data.crops = 0;
            update();
            alert("ØªÙ… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­!");
        }
    }

    function update() {
        document.getElementById('g-count').innerText = data.gold;
        document.getElementById('e-count').innerText = data.eggs;
        document.getElementById('s-count').innerText = data.seeds;
    }
</script>
</body>
</html>
