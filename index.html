<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø­ÙŠØ©</title>
    <style>
        body { 
            background: #4CAF50; /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡ */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            color: #333; 
            overflow: hidden; /* Ù„Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            display: flex; 
            flex-direction: column; 
            height: 100vh;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø© */
        .top-bar {
            background: #8BC34A; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ Ù…Ø·Ø§Ø¨Ù‚ */
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #689F38; /* Ø­Ø¯ÙˆØ¯ Ø£ØºÙ…Ù‚ */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1000;
        }
        .top-bar .section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .top-bar .stat {
            background: #AED581; /* Ø®Ù„ÙÙŠØ© Ø£ÙØªØ­ Ù„Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª */
            padding: 5px 12px;
            border-radius: 20px;
            color: #333;
            font-weight: bold;
            font-size: 16px;
            border: 1px solid #7CB342;
        }
        .top-bar .icon { width: 24px; height: 24px; vertical-align: middle; }
        .top-bar .close-btn {
            background: #D32F2F;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .game-container {
            flex-grow: 1;
            display: flex;
            position: relative;
            background: #4CAF50; /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡ */
        }

        /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„ÙŠØ³Ø±Ù‰ (Ù„ÙˆØ­Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†/Ø§Ù„Ù…Ù‡Ø§Ù…) */
        .side-panel {
            width: 200px;
            background: #B2DFDB; /* Ù„ÙˆÙ† Ø³Ù…Ø§ÙˆÙŠ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø© */
            padding: 15px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.2);
            position: relative;
            z-index: 900;
            overflow-y: auto;
        }
        .side-panel ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .side-panel li {
            background: #80CBC4; /* Ù„ÙˆÙ† Ø£ØºÙ…Ù‚ Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: bold;
            color: #212121;
        }
        .side-panel .status-icon { width: 20px; height: 20px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø§Ù„Ø¹Ø´Ø¨ Ø§Ù„Ù…ØªØ­Ø±Ùƒ) */
        .main-farm-area {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
            background-image: url('https://i.ibb.co/L9B3Hnx/grass-texture.png'); /* ØµÙˆØ±Ø© Ø¹Ø´Ø¨ ÙˆØ§Ù‚Ø¹ÙŠØ© */
            background-size: 100px 100px; /* Ø­Ø¬Ù… ØµØºÙŠØ± ÙŠØªÙƒØ±Ø± */
            animation: moveGrass 60s linear infinite; /* ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¹Ø´Ø¨ */
        }

        /* ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¹Ø´Ø¨ Ù„Ù„Ø®Ù„ÙÙŠØ© */
        @keyframes moveGrass {
            from { background-position: 0 0; }
            to { background-position: 1000px 1000px; }
        }

        /* Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .farm-animal {
            position: absolute;
            width: 120px; /* Ø­Ø¬Ù… Ø§Ù„Ø¯Ø¬Ø§Ø¬Ø© ÙˆØ§Ù„Ø¨Ù‚Ø±Ø© */
            height: auto;
            transform: translate(-50%, -50%); /* Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª */
            transition: left 3s linear, top 3s linear;
            z-index: 10;
        }

        /* Ø²Ø± "Ø¥ÙŠØ¹Ø§Ù†" Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø© */
        .collect-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: #42A5F5; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù…Ø·Ø§Ø¨Ù‚ */
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px #1976D2;
            z-index: 20;
        }
        .collect-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #1976D2;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #login-screen {
            position: fixed; inset: 0;
            background: #2E7D32;
            display: flex; align-items: center; justify-content: center;
            z-index: 9999;
            color: #333;
        }
        #login-screen .login-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            text-align: center;
        }
        #login-screen input {
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 200px;
            font-size: 16px;
        }
        #login-screen button {
            background: #FFC107;
            color: #333;
            padding: 12px 30px;
            border-radius: 8px;
            border: none;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h2>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± Ø§Ù„Ø­ÙŠØ©</h2>
            <input type="text" id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
            <button onclick="login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</button>
        </div>
    </div>

    <div id="game-ui" class="hidden">
        <div class="top-bar">
            <div class="section">
                <img src="https://i.ibb.co/VMy1w2N/home-icon.png" class="icon">
                <div class="stat">ğŸ’° <span id="gold-val">0</span></div>
                <img src="https://i.ibb.co/yQxG4Xw/egg-icon.png" class="icon">
                <div class="stat">ğŸ¥š <span id="egg-val">0</span></div>
                <img src="https://i.ibb.co/Qk4Vf1Y/honey-icon.png" class="icon">
                <div class="stat">ğŸ¯ <span id="honey-val">0</span></div>
            </div>
            <div class="section">
                <div class="stat">â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="lvl-val">1</span></div>
                <button class="close-btn" onclick="logout()">X</button>
            </div>
        </div>

        <div class="game-container">
            <div class="side-panel">
                <h3>Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ†</h3>
                <ul>
                    <li>Ø§Ø´Ù„ÙŠ <img src="https://i.ibb.co/yQxG4Xw/egg-icon.png" class="status-icon"></li>
                    <li>Ø§Ù‡ÙˆØ§Ø² <img src="https://i.ibb.co/Qk4Vf1Y/honey-icon.png" class="status-icon"></li>
                    <li>Ø£Ø¹Ø§Ù† <img src="https://i.ibb.co/VMy1w2N/home-icon.png" class="status-icon"></li>
                    <li>Ø£ØµØ¨Ø±Ù‡ <img src="https://i.ibb.co/yQxG4Xw/egg-icon.png" class="status-icon"></li>
                    <li>Ø§Ø¹ÙŠÙ„ Ø§Ù„ÙÙˆØ§Ø² <img src="https://i.ibb.co/Qk4Vf1Y/honey-icon.png" class="status-icon"></li>
                </ul>
                <div style="margin-top:20px; text-align:center;">
                    <button style="background:#4CAF50; color:white; padding:10px 20px; border-radius:10px; border:none; cursor:pointer;" onclick="showShop()">Ø´Ø±Ø§Ø¡ Ø­ÙŠÙˆØ§Ù†Ø§Øª</button>
                </div>
            </div>

            <div class="main-farm-area" id="farm-area">
                <button class="collect-button" onclick="collectAll()">Ø¥ÙŠØ¹Ø§Ù†</button>
            </div>
        </div>

        <div id="shop-modal" class="hidden" style="position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:2000;">
            <div style="background:white; padding:30px; border-radius:15px; text-align:center; color:#333;">
                <h3>Ù…ØªØ¬Ø± Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</h3>
                <div style="display:flex; gap:20px; margin-bottom:20px;">
                    <div>
                        <img src="https://i.ibb.co/4pMym7Q/chicken-walk.gif" width="80"><br>Ø¯Ø¬Ø§Ø¬Ø© (200ğŸ’°)<br>
                        <button onclick="buyAnimal('chicken', 200)">Ø´Ø±Ø§Ø¡</button>
                    </div>
                    <div>
                        <img src="https://i.ibb.co/r76k84M/cow-walk.gif" width="80"><br>Ø¨Ù‚Ø±Ø© (500ğŸ’°)<br>
                        <button onclick="buyAnimal('cow', 500)">Ø´Ø±Ø§Ø¡</button>
                    </div>
                    <div>
                        <img src="https://i.ibb.co/2S46Vq1/bee-hive.png" width="80"><br>Ø®Ù„ÙŠØ© Ù†Ø­Ù„ (1000ğŸ’°)<br>
                        <button onclick="buyAnimal('beeHive', 1000)">Ø´Ø±Ø§Ø¡</button>
                    </div>
                </div>
                <button onclick="document.getElementById('shop-modal').classList.add('hidden')">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>

    </div>

    <script>
        let farm = { user: "", gold: 500, eggs: 0, honey: 0, lvl: 1, animals: [] };

        const ANIMAL_IMAGES = {
            chicken: 'https://i.ibb.co/4pMym7Q/chicken-walk.gif', // Ø¯Ø¬Ø§Ø¬Ø© Ù…ØªØ­Ø±ÙƒØ©
            cow: 'https://i.ibb.co/r76k84M/cow-walk.gif',       // Ø¨Ù‚Ø±Ø© Ù…ØªØ­Ø±ÙƒØ©
            beeHive: 'https://i.ibb.co/2S46Vq1/bee-hive.png'    // Ø®Ù„ÙŠØ© Ù†Ø­Ù„ Ø«Ø§Ø¨ØªØ©
        };

        function login() {
            let u = document.getElementById('username').value.trim();
            if(!u) return;
            let saved = localStorage.getItem('farm_live_v13_' + u);
            if(saved) farm = JSON.parse(saved); else farm.user = u;
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('game-ui').classList.remove('hidden');
            
            farm.animals.forEach(animal => renderAnimal(animal.type, animal.id));
            updateUI();
            
            // Ø¨Ø¯Ø¡ Ø¢Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙˆØ§Ù„Ø­Ø±ÙƒØ©
            setInterval(produce, 5000); // ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
            setInterval(moveAnimals, 3000); // ÙƒÙ„ 3 Ø«ÙˆØ§Ù†Ù ØªØ­Ø±Ùƒ
        }

        function logout() {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ Ø³ÙŠØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ.")) {
                localStorage.setItem('farm_live_v13_' + farm.user, JSON.stringify(farm));
                location.reload();
            }
        }

        function renderAnimal(type, id) {
            let img = document.createElement('img');
            img.src = ANIMAL_IMAGES[type];
            img.className = 'farm-animal';
            img.id = `animal-${id}`;
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø¬Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„Ø­ÙŠÙˆØ§Ù†
            if (type === 'chicken') { img.style.width = '70px'; img.style.height = 'auto'; }
            else if (type === 'cow') { img.style.width = '120px'; img.style.height = 'auto'; }
            else if (type === 'beeHive') { 
                img.style.width = '80px'; img.style.height = 'auto'; 
                img.style.transition = 'none'; // Ø®Ù„ÙŠØ© Ø§Ù„Ù†Ø­Ù„ Ù„Ø§ ØªØªØ­Ø±Ùƒ
            }
            document.getElementById('farm-area').appendChild(img);
            moveSingleAnimal(img); // ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ù…ÙƒØ§Ù† Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙÙˆØ±Ø§Ù‹
        }

        function moveAnimals() {
            farm.animals.forEach(animal => {
                if(animal.type !== 'beeHive') { // Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ù†Ø­Ù„ Ù„Ø§ ØªØªØ­Ø±Ùƒ
                    let img = document.getElementById(`animal-${animal.id}`);
                    if(img) moveSingleAnimal(img);
                }
            });
        }

        function moveSingleAnimal(imgElement) {
            const farmArea = document.getElementById('farm-area');
            const newX = Math.random() * (farmArea.offsetWidth - imgElement.offsetWidth);
            const newY = Math.random() * (farmArea.offsetHeight - imgElement.offsetHeight);
            imgElement.style.left = `${newX}px`;
            imgElement.style.top = `${newY}px`;
        }

        function produce() {
            farm.animals.forEach(animal => {
                if (animal.type === 'chicken') farm.eggs++;
                else if (animal.type === 'beeHive') farm.honey++;
            });
            updateUI();
        }

        function buyAnimal(type, price) {
            if (farm.gold >= price) {
                farm.gold -= price;
                const newAnimalId = Date.now(); // Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ø­ÙŠÙˆØ§Ù†
                farm.animals.push({ type: type, id: newAnimalId });
                renderAnimal(type, newAnimalId);
                updateUI();
                alert(`ØªÙ… Ø´Ø±Ø§Ø¡ ${type === 'chicken' ? 'Ø¯Ø¬Ø§Ø¬Ø©' : type === 'cow' ? 'Ø¨Ù‚Ø±Ø©' : 'Ø®Ù„ÙŠØ© Ù†Ø­Ù„'}!`);
            } else {
                alert("Ø§Ù„Ø°Ù‡Ø¨ Ù„Ø§ ÙŠÙƒÙÙŠ!");
            }
            document.getElementById('shop-modal').classList.add('hidden');
        }

        function collectAll() {
            if (farm.eggs > 0) {
                farm.gold += farm.eggs * 10; // ÙƒÙ„ Ø¨ÙŠØ¶Ø© Ø¨Ù€ 10 Ø°Ù‡Ø¨
                farm.eggs = 0;
            }
            if (farm.honey > 0) {
                farm.gold += farm.honey * 50; // ÙƒÙ„ Ø¹Ø³Ù„ Ø¨Ù€ 50 Ø°Ù‡Ø¨
                farm.honey = 0;
            }
            updateUI();
            alert("ØªÙ… Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª!");
        }

        function showShop() {
            document.getElementById('shop-modal').classList.remove('hidden');
        }

        function updateUI() {
            document.getElementById('gold-val').innerText = farm.gold;
            document.getElementById('egg-val').innerText = farm.eggs;
            document.getElementById('honey-val').innerText = farm.honey;
            document.getElementById('lvl-val').innerText = Math.floor(farm.gold / 1000) + 1; // Ù…Ø³ØªÙˆÙ‰ ÙƒÙ„ 1000 Ø°Ù‡Ø¨
            localStorage.setItem('farm_live_v13_' + farm.user, JSON.stringify(farm));
        }
    </script>
</body>
                    </html>
