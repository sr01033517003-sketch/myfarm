<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø·ÙŠØ± - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø¯Ø«Ø©</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');
        
        * { box-sizing: border-box; }
        body { 
            background: #2e7d32; 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            color: #fff;
            overflow: hidden;
        }

        /* 1. Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© ØªÙ…Ø§Ù…Ø§Ù‹ */
        .top-stats-bar { 
            background: #1b5e20; 
            height: 60px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 15px;
            border-bottom: 3px solid #ffd700;
            width: 100%;
            position: fixed;
            top: 0;
            z-index: 1000;
        }
        .stat-item { 
            background: rgba(255,255,255,0.1); 
            padding: 5px 15px; 
            border-radius: 10px; 
            border: 1px solid #ffd700; 
            font-size: 14px; 
        }

        .main-content { 
            flex: 1; 
            display: flex; 
            margin-top: 60px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
            margin-bottom: 120px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¨Ø§Ù„Ø£Ø³ÙÙ„ */
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (Ø§Ù„Ù…ØªØ¬Ø± ÙÙ‚Ø·) */
        .side-menu { 
            width: 220px; 
            background: #B2DFDB; 
            color: #004D40; 
            padding: 15px; 
            border-left: 4px solid #00897B;
        }
        .shop-btn { 
            width: 100%; padding: 10px; margin: 5px 0; border: none; 
            background: #ef6c00; color: white; border-radius: 8px; 
            font-weight: bold; cursor: pointer; font-family: 'Cairo';
        }

        /* Ø³Ø§Ø­Ø© Ø§Ù„Ù„Ø¹Ø¨ */
        .game-area { 
            flex: 1; 
            background: #4caf50; 
            padding: 20px; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        /* 2. Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¨Ø§Ù„Ø£Ø³ÙÙ„ */
        .bottom-chat { 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            height: 120px; 
            background: #e0f2f1; 
            border-top: 4px solid #00897B; 
            display: flex; 
            padding: 10px; 
            gap: 10px;
            z-index: 1000;
        }
        .chat-display { 
            flex: 1; background: white; border-radius: 8px; 
            padding: 8px; overflow-y: auto; color: #333; font-size: 13px;
            border: 1px solid #ccc;
        }
        .chat-controls { display: flex; flex-direction: column; gap: 5px; width: 150px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª ÙˆØ§Ù„Ø²Ø±Ø§Ø¹Ø© */
        .pen { width: 90%; height: 180px; background: rgba(255,255,255,0.1); border: 2px dashed #fff; border-radius: 20px; position: relative; margin-bottom: 15px; }
        .grid { display: grid; grid-template-columns: repeat(4, 75px); gap: 10px; background: #5d4037; padding: 15px; border-radius: 15px; }
        .plot { width: 75px; height: 75px; background: #6d4c41; border: 2px solid #3e2723; border-radius: 8px; cursor: pointer; position: relative; display: flex; align-items: center; justify-content: center; font-size: 30px; }
        .timer { position: absolute; bottom: 0; width: 100%; background: #000; color: #0f0; font-size: 10px; text-align: center; }

        .chicken { position: absolute; width: 70px; transition: all 3s linear; }
        .sell-btn { position: fixed; bottom: 130px; left: 20px; background: #1565C0; color: white; padding: 12px 30px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; z-index: 500; }

        #login { position: fixed; inset: 0; background: #1b5e20; z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login">
    <div style="background:white; padding:30px; border-radius:15px; text-align:center; color:#333;">
        <h3>ğŸšœ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø©</h3>
        <input type="text" id="uname" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" style="padding:10px; font-family:'Cairo';"><br><br>
        <button onclick="start()" class="shop-btn">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div class="top-stats-bar">
    <div class="stat-item">ğŸ’° Ø°Ù‡Ø¨: <span id="g-val">1000</span></div>
    <div class="stat-item">ğŸ¥š Ø¨ÙŠØ¶: <span id="e-val">0</span></div>
    <div class="stat-item">ğŸŒ± Ø¨Ø°ÙˆØ±: <span id="s-val">5</span></div>
    <div class="stat-item">ğŸŒ¾ Ø­ØµØ§Ø¯: <span id="c-val">0</span></div>
</div>

<div class="main-content">
    <div class="side-menu">
        <h4 style="margin:0 0 10px 0;">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</h4>
        <button class="shop-btn" onclick="buy('seed', 50)">ğŸŒ± Ø¨Ø°ÙˆØ± (50ğŸ’°)</button>
        <button class="shop-btn" onclick="buy('chicken', 200)">ğŸ¥ Ø¯Ø¬Ø§Ø¬Ø© (200ğŸ’°)</button>
    </div>

    <div class="game-area">
        <div class="pen" id="pen"></div>
        <div class="grid" id="grid"></div>
    </div>
</div>

<button class="sell-btn" onclick="sell()">ğŸ’° Ø¥ÙŠØ¹Ø§Ù† (Ø¨ÙŠØ¹ Ø§Ù„ÙƒÙ„)</button>

<div class="bottom-chat">
    <div class="chat-display" id="chat">
        <div>Ø§Ù„Ù†Ø¸Ø§Ù…: Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ø£Ø³ÙÙ„.</div>
    </div>
    <div class="chat-controls">
        <input type="text" id="chat-in" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§..." style="padding:5px; border-radius:5px; border:1px solid #ccc;">
        <button onclick="send()" style="background:#00897B; color:white; border:none; padding:5px; border-radius:5px; cursor:pointer;">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
</div>

<script>
    let farm = { gold: 1000, eggs: 0, seeds: 5, crops: 0, chickens: 0 };
    const IMG = "https://m.media-amazon.com/images/I/41-N7X0-1lL._AC_.jpg";

    function start() {
        if(!document.getElementById('uname').value) return;
        document.getElementById('login').classList.add('hidden');
        init();
        setInterval(move, 3000);
        setInterval(() => { if(farm.chickens > 0) { farm.eggs += farm.chickens; update(); } }, 10000);
    }

    function init() {
        const g = document.getElementById('grid');
        for(let i=0; i<12; i++) {
            let p = document.createElement('div');
            p.className = 'plot';
            p.onclick = () => plant(p);
            g.appendChild(p);
        }
    }

    function plant(p) {
        if(p.innerHTML === "" && farm.seeds > 0) {
            farm.seeds--; p.innerHTML = "ğŸŒ±";
            let time = 180;
            let t = document.createElement('div'); t.className = 'timer'; p.appendChild(t);
            update();
            let count = setInterval(() => {
                time--;
                t.innerText = `${Math.floor(time/60)}:${time%60 < 10 ? '0'+time%60 : time%60}`;
                if(time <= 0) {
                    clearInterval(count); p.innerHTML = "ğŸŒ¿";
                    p.onclick = () => { farm.crops++; p.innerHTML = ""; p.onclick = () => plant(p); update(); };
                }
            }, 1000);
        }
    }

    function buy(item, price) {
        if(farm.gold >= price) {
            farm.gold -= price;
            if(item === 'seed') farm.seeds += 5;
            if(item === 'chicken') {
                farm.chickens++;
                let i = document.createElement('img'); i.src = IMG; i.className = 'chicken';
                i.style.left = "50%"; i.style.top = "50%";
                document.getElementById('pen').appendChild(i);
            }
            update();
            msg("Ø§Ù„Ù†Ø¸Ø§Ù…", `ØªÙ… Ø´Ø±Ø§Ø¡ ${item}`);
        }
    }

    function move() {
        let cs = document.getElementsByClassName('chicken');
        for(let c of cs) { c.style.left = Math.random()*80+"%"; c.style.top = Math.random()*60+"%"; }
    }

    function sell() {
        let total = (farm.eggs * 20) + (farm.crops * 60);
        if(total > 0) {
            farm.gold += total; farm.eggs = 0; farm.crops = 0;
            update(); alert("Ø±Ø¨Ø­Øª " + total + " ğŸ’°");
        }
    }

    function send() {
        let i = document.getElementById('chat-in');
        if(i.value) { msg("Ø£Ù†Øª", i.value); i.value = ""; }
    }

    function msg(u, t) {
        let c = document.getElementById('chat');
        c.innerHTML += `<div><b>${u}:</b> ${t}</div>`;
        c.scrollTop = c.scrollHeight;
    }

    function update() {
        document.getElementById('g-val').innerText = farm.gold;
        document.getElementById('e-val').innerText = farm.eggs;
        document.getElementById('s-val').innerText = farm.seeds;
        document.getElementById('c-val').innerText = farm.crops;
    }
</script>
</body>
    </html>
